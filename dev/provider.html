<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>å¼€å‘æŒ‡å—ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªæ–°çš„ DNS Provider | DDNS Documentation</title>
    <meta name="description" content="è‡ªåŠ¨æ›´æ–° DNS è§£æåˆ°æœ¬æœº IP åœ°å€">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.DuCcHegb.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.KtpnFbbx.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.1rcJRkat.js">
    <link rel="modulepreload" href="/assets/chunks/framework.CFe3ezYR.js">
    <link rel="modulepreload" href="/assets/dev_provider.md.CZunGOLF.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-304c8b69><!--[--><!--]--><!--[--><span tabindex="-1" data-v-10d4d845></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-10d4d845>Skip to content</a><!--]--><!----><header class="VPNav" data-v-304c8b69 data-v-604a0865><div class="VPNavBar" data-v-604a0865 data-v-18128346><div class="wrapper" data-v-18128346><div class="container" data-v-18128346><div class="title" data-v-18128346><div class="VPNavBarTitle has-sidebar" data-v-18128346 data-v-d4488dd0><a class="title" href="/" data-v-d4488dd0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/img/ddns.svg" alt data-v-ab19afbb><!--]--><span data-v-d4488dd0>DDNS</span><!--[--><!--]--></a></div></div><div class="content" data-v-18128346><div class="content-body" data-v-18128346><!--[--><!--]--><div class="VPNavBarSearch search" data-v-18128346><!--[--><!----><div id="local-search"><button type="button" aria-label="æœç´¢æ–‡æ¡£" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-18128346 data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>é¦–é¡µ</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docker" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>Docker</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/install" tabindex="0" data-v-020be4db data-v-81dba28a><!--[--><span data-v-81dba28a>å®‰è£…</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-020be4db data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d8fae6e2><span class="text" data-v-d8fae6e2><!----><span data-v-d8fae6e2>é…ç½®æ–¹å¼</span><span class="vpi-chevron-down text-icon" data-v-d8fae6e2></span></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><div class="items" data-v-fcd1d7a8><!--[--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/config/cli" data-v-acfa8338><!--[--><span data-v-acfa8338>å‘½ä»¤è¡Œå‚æ•°</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/config/env" data-v-acfa8338><!--[--><span data-v-acfa8338>ç¯å¢ƒå˜é‡</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/config/json" data-v-acfa8338><!--[--><span data-v-acfa8338>JSONé…ç½®</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-020be4db data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d8fae6e2><span class="text" data-v-d8fae6e2><!----><span data-v-d8fae6e2>DNSæœåŠ¡å•†</span><span class="vpi-chevron-down text-icon" data-v-d8fae6e2></span></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><div class="items" data-v-fcd1d7a8><!--[--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/providers/" data-v-acfa8338><!--[--><span data-v-acfa8338>æ¦‚è¿°</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/providers/alidns" data-v-acfa8338><!--[--><span data-v-acfa8338>é˜¿é‡ŒDNS</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/providers/dnspod" data-v-acfa8338><!--[--><span data-v-acfa8338>DNSPod</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/providers/cloudflare" data-v-acfa8338><!--[--><span data-v-acfa8338>Cloudflare</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-020be4db data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-d8fae6e2><span class="text" data-v-d8fae6e2><!----><span data-v-d8fae6e2>å¼€å‘æ–‡æ¡£</span><span class="vpi-chevron-down text-icon" data-v-d8fae6e2></span></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><div class="items" data-v-fcd1d7a8><!--[--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link" href="/dev/config" data-v-acfa8338><!--[--><span data-v-acfa8338>é…ç½®æ–‡æ¡£</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-fcd1d7a8 data-v-acfa8338><a class="VPLink link active" href="/dev/provider" data-v-acfa8338><!--[--><span data-v-acfa8338>Providerå¼€å‘</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-18128346 data-v-e9d6c6e1 data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-d8fae6e2><span class="text" data-v-d8fae6e2><span class="vpi-languages option-icon" data-v-d8fae6e2></span><!----><span class="vpi-chevron-down text-icon" data-v-d8fae6e2></span></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><div class="items" data-v-e9d6c6e1><p class="title" data-v-e9d6c6e1>ç®€ä½“ä¸­æ–‡</p><!--[--><div class="VPMenuLink" data-v-e9d6c6e1 data-v-acfa8338><a class="VPLink link" href="/en/dev/provider" lang="en-US" data-v-acfa8338><!--[--><span data-v-acfa8338>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-18128346 data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-18128346 data-v-ef6192dc data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NewFuture/DDNS" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-18128346 data-v-600b50c9 data-v-d8fae6e2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-d8fae6e2><span class="vpi-more-horizontal icon" data-v-d8fae6e2></span></button><div class="menu" data-v-d8fae6e2><div class="VPMenu" data-v-d8fae6e2 data-v-fcd1d7a8><!----><!--[--><!--[--><div class="group translations" data-v-600b50c9><p class="trans-title" data-v-600b50c9>ç®€ä½“ä¸­æ–‡</p><!--[--><div class="VPMenuLink" data-v-600b50c9 data-v-acfa8338><a class="VPLink link" href="/en/dev/provider" lang="en-US" data-v-acfa8338><!--[--><span data-v-acfa8338>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-600b50c9><div class="item appearance" data-v-600b50c9><p class="label" data-v-600b50c9>ä¸»é¢˜</p><div class="appearance-action" data-v-600b50c9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-600b50c9 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-600b50c9><div class="item social-links" data-v-600b50c9><div class="VPSocialLinks social-links-list" data-v-600b50c9 data-v-a1a7286e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/NewFuture/DDNS" aria-label="github" target="_blank" rel="me noopener" data-v-a1a7286e data-v-32d78712><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-18128346 data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-18128346><div class="divider-line" data-v-18128346></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-304c8b69 data-v-73add737><div class="container" data-v-73add737><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-73add737><span class="vpi-align-left menu-icon" data-v-73add737></span><span class="menu-text" data-v-73add737>èœå•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-73add737 data-v-e28a51a6><button data-v-e28a51a6>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-304c8b69 data-v-49f51a23><div class="curtain" data-v-49f51a23></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-49f51a23><span class="visually-hidden" id="sidebar-aria-label" data-v-49f51a23> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>å¼€å‘æ–‡æ¡£</h2><!----></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/dev/config" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>é…ç½®æ–‡æ¡£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/dev/provider" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Providerå¼€å‘æŒ‡å—</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-304c8b69 data-v-bd4f21ea><div class="VPDoc has-sidebar has-aside" data-v-bd4f21ea data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>é¡µé¢å¯¼èˆª</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-63c57e50><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _dev_provider" data-v-d668f7cc><div><h1 id="å¼€å‘æŒ‡å—-å¦‚ä½•å®ç°ä¸€ä¸ªæ–°çš„-dns-provider" tabindex="-1">å¼€å‘æŒ‡å—ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªæ–°çš„ DNS Provider <a class="header-anchor" href="#å¼€å‘æŒ‡å—-å¦‚ä½•å®ç°ä¸€ä¸ªæ–°çš„-dns-provider" aria-label="Permalink to â€œå¼€å‘æŒ‡å—ï¼šå¦‚ä½•å®ç°ä¸€ä¸ªæ–°çš„ DNS Providerâ€">â€‹</a></h1><p>æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•åŸºäºä¸åŒçš„æŠ½è±¡åŸºç±»ï¼Œå¿«é€Ÿå®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ DNS æœåŠ¡å•†é€‚é…ç±»ï¼Œæ”¯æŒåŠ¨æ€ DNS è®°å½•çš„åˆ›å»ºä¸æ›´æ–°ã€‚</p><h2 id="ğŸ“¦-ç›®å½•ç»“æ„" tabindex="-1">ğŸ“¦ ç›®å½•ç»“æ„ <a class="header-anchor" href="#ğŸ“¦-ç›®å½•ç»“æ„" aria-label="Permalink to â€œğŸ“¦ ç›®å½•ç»“æ„â€">â€‹</a></h2><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ddns/</span></span>
<span class="line"><span>â”œâ”€â”€ provider/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ _base.py         # æŠ½è±¡åŸºç±» SimpleProvider å’Œ BaseProviderï¼Œç­¾åè®¤è¯å‡½æ•°</span></span>
<span class="line"><span>â”‚   â””â”€â”€ myprovider.py    # ä½ çš„æ–°æœåŠ¡å•†å®ç°</span></span>
<span class="line"><span>tests/</span></span>
<span class="line"><span>â”œâ”€â”€ base_test.py         # å…±äº«æµ‹è¯•å·¥å…·å’ŒåŸºç±»</span></span>
<span class="line"><span>â”œâ”€â”€ test_provider_*.py   # å„ä¸ªProviderçš„å•å…ƒæµ‹è¯•æ–‡ä»¶</span></span>
<span class="line"><span>â”œâ”€â”€ test_module_*.py     # å…¶ä»–æµ‹è¯•</span></span>
<span class="line"><span>â””â”€â”€ README.md            # æµ‹è¯•æŒ‡å—</span></span>
<span class="line"><span>doc/dev/</span></span>
<span class="line"><span>â””â”€â”€ provider.md          # Providerå¼€å‘æŒ‡å— (æœ¬æ–‡æ¡£)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><hr><h2 id="ğŸš€-å¿«é€Ÿå¼€å§‹" tabindex="-1">ğŸš€ å¿«é€Ÿå¼€å§‹ <a class="header-anchor" href="#ğŸš€-å¿«é€Ÿå¼€å§‹" aria-label="Permalink to â€œğŸš€ å¿«é€Ÿå¼€å§‹â€">â€‹</a></h2><p>DDNS æä¾›ä¸¤ç§æŠ½è±¡åŸºç±»ï¼Œæ ¹æ®DNSæœåŠ¡å•†çš„APIç‰¹æ€§é€‰æ‹©åˆé€‚çš„åŸºç±»ï¼š</p><h3 id="_1-simpleprovider-ç®€å•dnsæœåŠ¡å•†" tabindex="-1">1. SimpleProvider - ç®€å•DNSæœåŠ¡å•† <a class="header-anchor" href="#_1-simpleprovider-ç®€å•dnsæœåŠ¡å•†" aria-label="Permalink to â€œ1. SimpleProvider - ç®€å•DNSæœåŠ¡å•†â€">â€‹</a></h3><p>é€‚ç”¨äºåªæä¾›ç®€å•æ›´æ–°æ¥å£ï¼Œä¸æ”¯æŒæŸ¥è¯¢ç°æœ‰è®°å½•çš„DNSæœåŠ¡å•†ã€‚</p><p><strong>å¿…é¡»å®ç°çš„æ–¹æ³•ï¼š</strong></p><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>æ˜¯å¦å¿…é¡»</th></tr></thead><tbody><tr><td><code>set_record(domain, value, record_type=&quot;A&quot;, ttl=None, line=None, **extra)</code></td><td><strong>æ›´æ–°æˆ–åˆ›å»ºDNSè®°å½•</strong></td><td>âœ… å¿…é¡»</td></tr><tr><td><code>_validate()</code></td><td><strong>éªŒè¯è®¤è¯ä¿¡æ¯</strong></td><td>âŒ å¯é€‰ï¼ˆæœ‰é»˜è®¤å®ç°ï¼‰</td></tr></tbody></table><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>åªæä¾›æ›´æ–°æ¥å£çš„DNSæœåŠ¡å•†ï¼ˆå¦‚HE.netï¼‰</li><li>ä¸éœ€è¦æŸ¥è¯¢ç°æœ‰è®°å½•çš„ç®€å•åœºæ™¯</li><li>è°ƒè¯•å’Œæµ‹è¯•ç”¨é€”</li><li>å›è°ƒ(Webhook)ç±»å‹çš„DNSæ›´æ–°</li></ul><h3 id="_2-baseprovider-å®Œæ•´dnsæœåŠ¡å•†-â­ï¸-æ¨è" tabindex="-1">2. BaseProvider - å®Œæ•´DNSæœåŠ¡å•† â­ï¸ æ¨è <a class="header-anchor" href="#_2-baseprovider-å®Œæ•´dnsæœåŠ¡å•†-â­ï¸-æ¨è" aria-label="Permalink to â€œ2. BaseProvider - å®Œæ•´DNSæœåŠ¡å•†  â­ï¸ æ¨èâ€">â€‹</a></h3><p>é€‚ç”¨äºæä¾›å®Œæ•´CRUDæ“ä½œçš„æ ‡å‡†DNSæœåŠ¡å•†APIã€‚</p><p><strong>å¿…é¡»å®ç°çš„æ–¹æ³•ï¼š</strong></p><table tabindex="0"><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th><th>æ˜¯å¦å¿…é¡»</th></tr></thead><tbody><tr><td><code>_query_zone_id(domain)</code></td><td><strong>æŸ¥è¯¢ä¸»åŸŸåçš„Id</strong> (zone_id)</td><td>âœ… å¿…é¡»</td></tr><tr><td><code>_query_record(zone_id, subdomain, main_domain, record_type, line=None, extra=None)</code></td><td><strong>æŸ¥è¯¢å½“å‰ DNS è®°å½•</strong></td><td>âœ… å¿…é¡»</td></tr><tr><td><code>_create_record(zone_id, subdomain, main_domain, value, record_type, ttl=None, line=None, extra=None)</code></td><td><strong>åˆ›å»ºæ–°è®°å½•</strong></td><td>âœ… å¿…é¡»</td></tr><tr><td><code>_update_record(zone_id, old_record, value, record_type, ttl=None, line=None, extra=None)</code></td><td><strong>æ›´æ–°ç°æœ‰è®°å½•</strong></td><td>âœ… å¿…é¡»</td></tr><tr><td><code>_validate()</code></td><td><strong>éªŒè¯è®¤è¯ä¿¡æ¯</strong></td><td>âŒ å¯é€‰ï¼ˆæœ‰é»˜è®¤idå’Œtokenå¿…å¡«ï¼‰</td></tr></tbody></table><p><strong>å†…ç½®åŠŸèƒ½ï¼š</strong></p><ul><li>âœ… SimpleProviderçš„æ‰€æœ‰åŠŸèƒ½</li><li>ğŸ¯ è‡ªåŠ¨è®°å½•ç®¡ç†ï¼ˆæŸ¥è¯¢â†’åˆ›å»º/æ›´æ–°çš„å®Œæ•´æµç¨‹ï¼‰</li><li>ğŸ’¾ ç¼“å­˜æœºåˆ¶</li><li>ğŸ“ è¯¦ç»†çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯å¤„ç†</li></ul><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p><ul><li>æä¾›å®Œæ•´REST APIçš„DNSæœåŠ¡å•†ï¼ˆå¦‚Cloudflareã€é˜¿é‡Œäº‘DNSï¼‰</li><li>éœ€è¦æŸ¥è¯¢ç°æœ‰è®°å½•çŠ¶æ€çš„åœºæ™¯</li><li>æ”¯æŒç²¾ç¡®çš„è®°å½•ç®¡ç†å’ŒçŠ¶æ€è·Ÿè¸ª</li></ul><h2 id="ğŸ”§-å®ç°ç¤ºä¾‹" tabindex="-1">ğŸ”§ å®ç°ç¤ºä¾‹ <a class="header-anchor" href="#ğŸ”§-å®ç°ç¤ºä¾‹" aria-label="Permalink to â€œğŸ”§ å®ç°ç¤ºä¾‹â€">â€‹</a></h2><h3 id="simpleprovider-ç¤ºä¾‹" tabindex="-1">SimpleProvider ç¤ºä¾‹ <a class="header-anchor" href="#simpleprovider-ç¤ºä¾‹" aria-label="Permalink to â€œSimpleProvider ç¤ºä¾‹â€">â€‹</a></h3><p>é€‚ç”¨äºç®€å•DNSæœåŠ¡å•†ï¼Œå‚è€ƒç°æœ‰å®ç°ï¼š</p><ul><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/he.py" target="_blank"><code>provider/he.py</code></a>: Hurricane Electric DNSæ›´æ–°</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/debug.py" target="_blank"><code>provider/debug.py</code></a>: è°ƒè¯•ç”¨é€”ï¼Œæ‰“å°IPåœ°å€</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/callback.py" target="_blank"><code>provider/callback.py</code></a>: å›è°ƒ/Webhookç±»å‹DNSæ›´æ–°</li></ul><blockquote><p>provider/mysimpleprovider.py</p></blockquote><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># coding=utf-8</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è‡ªå®šä¹‰ç®€å• DNS æœåŠ¡å•†ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@author: YourGithubUsername</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ._base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SimpleProvider, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TYPE_FORM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MySimpleProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SimpleProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    ç¤ºä¾‹SimpleProviderå®ç°</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    æ”¯æŒç®€å•çš„DNSè®°å½•æ›´æ–°ï¼Œé€‚ç”¨äºå¤§å¤šæ•°ç®€å•DNS API</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    API</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://api.simpledns.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TYPE_FORM</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # æˆ– TYPE_JSON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    decode_response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # å¦‚æœè¿”å›çº¯æ–‡æœ¬è€ŒéJSONï¼Œè®¾ä¸ºFalse</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;éªŒè¯è®¤è¯ä¿¡æ¯ï¼ˆå¯é€‰é‡å†™ï¼‰&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MySimpleProvider, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)._validate()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ·»åŠ ç‰¹å®šçš„éªŒè¯é€»è¾‘ï¼Œå¦‚æ£€æŸ¥APIå¯†é’¥æ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ValueError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid API token format&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> set_record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, domain, value, record_type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ttl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">extra):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # type: (str, str, str, int | None, str | None) -&gt; bool</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æ›´æ–°æˆ–åˆ›å»ºDNSè®°å½• https://doc.simpledns.com/update&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # logic to update DNS record</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="baseprovider-ç¤ºä¾‹" tabindex="-1">BaseProvider ç¤ºä¾‹ <a class="header-anchor" href="#baseprovider-ç¤ºä¾‹" aria-label="Permalink to â€œBaseProvider ç¤ºä¾‹â€">â€‹</a></h3><p>é€‚ç”¨äºæ ‡å‡†DNSæœåŠ¡å•†ï¼Œå‚è€ƒç°æœ‰å®ç°ï¼š</p><ul><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/dnspod.py" target="_blank"><code>provider/dnspod.py</code></a>: POST è¡¨å•æ•°æ®ï¼Œæ— ç­¾å</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/cloudflare.py" target="_blank"><code>provider/cloudflare.py</code></a>: RESTful JSONï¼Œæ— ç­¾å</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/alidns.py" target="_blank"><code>provider/alidns.py</code></a>: POST è¡¨å•+sha256å‚æ•°ç­¾å</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/huaweidns.py" target="_blank"><code>provider/huaweidns.py</code></a>: RESTful JSONï¼Œå‚æ•°headerç­¾å</li></ul><blockquote><p>provider/myprovider.py</p></blockquote><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># coding=utf-8</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">è‡ªå®šä¹‰æ ‡å‡† DNS æœåŠ¡å•†ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@author: YourGithubUsername</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ._base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseProvider, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TYPE_JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, hmac_sha256_authorization, sha256_hash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    ç¤ºä¾‹BaseProviderå®ç°</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    é€‚ç”¨äºæä¾›å®Œæ•´CRUD APIçš„DNSæœåŠ¡å•†</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    API</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://api.exampledns.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> TYPE_JSON</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æˆ– TYPE_FORM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _query_zone_id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, domain):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # type: (str) -&gt; str | None</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æŸ¥è¯¢Zoneä¿¡æ¯ ZoneId https://doc.exmaple.com/api/query_zone&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._request(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ZoneInfo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.debug(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;domain not found for: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, domain)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _query_record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, zone_id, subdomain, main_domain, record_type, line, extra):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # type: (str, str, str, str, str | None, dict) -&gt; dict | None</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æŸ¥è¯¢è®°å½•ä¿¡æ¯ https://doc.exmaple.com/api/list_records&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._request(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DescribeRecords&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ZoneId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zone_id, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.warning(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;No record found for: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _create_record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, zone_id, subdomain, main_domain, value, record_type, ttl, line, extra):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # type: (str, str, str, str, str, int, str | None, dict) -&gt; bool</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;åˆ›å»ºæ–°record https://doc.exmaple.com/api/create_record&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._request(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CreateRecord&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ZoneId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zone_id, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DomainName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">domain, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">OriginInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">origin, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">extra)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.error(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to create record: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _update_record</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, zone_id, old_record, value, record_type, ttl, line, extra):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # type: (str, Any, str, str, int, str | None, dict) -&gt; bool</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æ›´æ–°record https://doc.exmaple.com/api/update_record&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._request(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ModifyRecord&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ZoneId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">zone_id, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">DomainName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">domain, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">OriginInfo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">origin)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        ...</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.error(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Failed to update record: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><hr><h2 id="âœ…-å¼€å‘æœ€ä½³å®è·µ" tabindex="-1">âœ… å¼€å‘æœ€ä½³å®è·µ <a class="header-anchor" href="#âœ…-å¼€å‘æœ€ä½³å®è·µ" aria-label="Permalink to â€œâœ… å¼€å‘æœ€ä½³å®è·µâ€">â€‹</a></h2><h3 id="é€‰æ‹©åˆé€‚çš„åŸºç±»" tabindex="-1">é€‰æ‹©åˆé€‚çš„åŸºç±» <a class="header-anchor" href="#é€‰æ‹©åˆé€‚çš„åŸºç±»" aria-label="Permalink to â€œé€‰æ‹©åˆé€‚çš„åŸºç±»â€">â€‹</a></h3><ol><li><p><strong>SimpleProvider</strong> - åŠŸèƒ½ä¸å®Œæ•´çš„DNSæœåŠ¡å•†</p><ul><li>âœ… DNSæœåŠ¡å•†åªæä¾›æ›´æ–°API</li><li>âœ… ä¸éœ€è¦æŸ¥è¯¢ç°æœ‰è®°å½•</li></ul></li><li><p><strong>BaseProvider</strong> - é€‚åˆæ ‡å‡†å’Œå¤æ‚åœºæ™¯</p><ul><li>âœ… DNSæœåŠ¡å•†æä¾›å®Œæ•´æŸ¥è¯¢,åˆ›å»ºï¼Œä¿®æ”¹ API</li><li>âœ… éœ€è¦ç²¾ç¡®çš„è®°å½•çŠ¶æ€ç®¡ç†</li><li>âœ… æ”¯æŒå¤æ‚çš„åŸŸåè§£æé€»è¾‘</li></ul></li></ol><h3 id="é€šç”¨å¼€å‘å»ºè®®" tabindex="-1">é€šç”¨å¼€å‘å»ºè®® <a class="header-anchor" href="#é€šç”¨å¼€å‘å»ºè®®" aria-label="Permalink to â€œé€šç”¨å¼€å‘å»ºè®®â€">â€‹</a></h3><h4 id="ğŸŒ-httpè¯·æ±‚å¤„ç†" tabindex="-1">ğŸŒ HTTPè¯·æ±‚å¤„ç† <a class="header-anchor" href="#ğŸŒ-httpè¯·æ±‚å¤„ç†" aria-label="Permalink to â€œğŸŒ HTTPè¯·æ±‚å¤„ç†â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨å†…ç½®çš„_httpæ–¹æ³•ï¼Œè‡ªåŠ¨å¤„ç†ä»£ç†ã€ç¼–ç ã€æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._http(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="ğŸ”’-æ ¼å¼éªŒè¯" tabindex="-1">ğŸ”’ æ ¼å¼éªŒè¯ <a class="header-anchor" href="#ğŸ”’-æ ¼å¼éªŒè¯" aria-label="Permalink to â€œğŸ”’ æ ¼å¼éªŒè¯â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;è®¤è¯ä¿¡æ¯éªŒè¯ç¤ºä¾‹&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MyProvider, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)._validate()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ£€æŸ¥APIå¯†é’¥æ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ValueError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;API token must be at least 16 characters&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="ğŸ“-æ—¥å¿—è®°å½•" tabindex="-1">ğŸ“ æ—¥å¿—è®°å½• <a class="header-anchor" href="#ğŸ“-æ—¥å¿—è®°å½•" aria-label="Permalink to â€œğŸ“ æ—¥å¿—è®°å½•â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.info(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DNS record got: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.warning(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DNS record update returned false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><hr><h2 id="ğŸ§ª-æµ‹è¯•å’Œè°ƒè¯•" tabindex="-1">ğŸ§ª æµ‹è¯•å’Œè°ƒè¯• <a class="header-anchor" href="#ğŸ§ª-æµ‹è¯•å’Œè°ƒè¯•" aria-label="Permalink to â€œğŸ§ª æµ‹è¯•å’Œè°ƒè¯•â€">â€‹</a></h2><h3 id="å•å…ƒæµ‹è¯•" tabindex="-1">å•å…ƒæµ‹è¯• <a class="header-anchor" href="#å•å…ƒæµ‹è¯•" aria-label="Permalink to â€œå•å…ƒæµ‹è¯•â€">â€‹</a></h3><p>æ¯ä¸ªProvideréƒ½åº”è¯¥æœ‰å®Œæ•´çš„å•å…ƒæµ‹è¯•ã€‚é¡¹ç›®æä¾›ç»Ÿä¸€çš„æµ‹è¯•åŸºç±»å’Œå·¥å…·ï¼š</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># tests/test_provider_myprovider.py</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_test </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> BaseProviderTestCase, unittest, patch, MagicMock</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ddns.provider.myprovider </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MyProvider</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TestMyProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseProviderTestCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setUp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(TestMyProvider, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).setUp()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Providerç‰¹å®šçš„setup</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test_init_with_basic_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æµ‹è¯•åŸºæœ¬åˆå§‹åŒ–&quot;&quot;&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="è¿è¡Œæµ‹è¯•" tabindex="-1">è¿è¡Œæµ‹è¯• <a class="header-anchor" href="#è¿è¡Œæµ‹è¯•" aria-label="Permalink to â€œè¿è¡Œæµ‹è¯•â€">â€‹</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿è¡Œæ‰€æœ‰æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unittest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> discover</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿è¡Œç‰¹å®šProvideræµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unittest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests.test_provider_myprovider</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tests/test_provider_myprovider.py</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><hr><h2 id="ğŸ“š-æ›´å¤šèµ„æºå’Œæœ€ä½³å®è·µ" tabindex="-1">ğŸ“š æ›´å¤šèµ„æºå’Œæœ€ä½³å®è·µ <a class="header-anchor" href="#ğŸ“š-æ›´å¤šèµ„æºå’Œæœ€ä½³å®è·µ" aria-label="Permalink to â€œğŸ“š æ›´å¤šèµ„æºå’Œæœ€ä½³å®è·µâ€">â€‹</a></h2><h3 id="ğŸ—ï¸-é¡¹ç›®ç»“æ„å»ºè®®" tabindex="-1">ğŸ—ï¸ é¡¹ç›®ç»“æ„å»ºè®® <a class="header-anchor" href="#ğŸ—ï¸-é¡¹ç›®ç»“æ„å»ºè®®" aria-label="Permalink to â€œğŸ—ï¸ é¡¹ç›®ç»“æ„å»ºè®®â€">â€‹</a></h3><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>ddns/</span></span>
<span class="line"><span>â”œâ”€â”€ provider/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ _base.py              # åŸºç±»å®šä¹‰</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ myprovider.py         # ä½ çš„Providerå®ç°</span></span>
<span class="line"><span>â”‚   â””â”€â”€ __init__.py           # å¯¼å…¥å’Œæ³¨å†Œ</span></span>
<span class="line"><span>tests/</span></span>
<span class="line"><span>â”œâ”€â”€ base_test.py              # å…±äº«æµ‹è¯•åŸºç±»</span></span>
<span class="line"><span>â”œâ”€â”€ test_provider_myprovider.py  # ä½ çš„Provideræµ‹è¯•</span></span>
<span class="line"><span>â””â”€â”€ README.md                 # æµ‹è¯•æŒ‡å—</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ğŸ“–-å‚è€ƒå®ç°" tabindex="-1">ğŸ“– å‚è€ƒå®ç° <a class="header-anchor" href="#ğŸ“–-å‚è€ƒå®ç°" aria-label="Permalink to â€œğŸ“– å‚è€ƒå®ç°â€">â€‹</a></h3><p><strong>SimpleProvider å‚è€ƒï¼š</strong></p><ul><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/he.py" target="_blank"><code>provider/he.py</code></a> - Hurricane Electric (ç®€å•è¡¨å•æäº¤)</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/debug.py" target="_blank"><code>provider/debug.py</code></a> - è°ƒè¯•å·¥å…· (ä»…æ‰“å°ä¿¡æ¯)</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/callback.py" target="_blank"><code>provider/callback.py</code></a> - å›è°ƒ/Webhookæ¨¡å¼</li></ul><p><strong>BaseProvider å‚è€ƒï¼š</strong></p><ul><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/cloudflare.py" target="_blank"><code>provider/cloudflare.py</code></a> - RESTful JSON API</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/alidns.py" target="_blank"><code>provider/alidns.py</code></a> - POST+ç­¾åè®¤è¯</li><li><a href="https://github.com/NewFuture/DDNS/blob/master/ddns/provider/dnspod.py" target="_blank"><code>provider/dnspod.py</code></a> - POSTè¡¨å•æ•°æ®æäº¤</li></ul><hr><h2 id="ğŸ”-äº‘æœåŠ¡å•†è®¤è¯ç­¾åç®—æ³•" tabindex="-1">ğŸ” äº‘æœåŠ¡å•†è®¤è¯ç­¾åç®—æ³• <a class="header-anchor" href="#ğŸ”-äº‘æœåŠ¡å•†è®¤è¯ç­¾åç®—æ³•" aria-label="Permalink to â€œğŸ” äº‘æœåŠ¡å•†è®¤è¯ç­¾åç®—æ³•â€">â€‹</a></h2><p>å¯¹äºéœ€è¦ç­¾åè®¤è¯çš„äº‘æœåŠ¡å•†ï¼ˆå¦‚é˜¿é‡Œäº‘ã€åä¸ºäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰ï¼ŒDDNS æä¾›äº†é€šç”¨çš„ HMAC-SHA256 ç­¾åè®¤è¯å‡½æ•°ã€‚</p><h3 id="ç­¾åè®¤è¯å·¥å…·å‡½æ•°" tabindex="-1">ç­¾åè®¤è¯å·¥å…·å‡½æ•° <a class="header-anchor" href="#ç­¾åè®¤è¯å·¥å…·å‡½æ•°" aria-label="Permalink to â€œç­¾åè®¤è¯å·¥å…·å‡½æ•°â€">â€‹</a></h3><h4 id="hmac-sha256-authorization-é€šç”¨ç­¾åç”Ÿæˆå™¨" tabindex="-1"><code>hmac_sha256_authorization()</code> - é€šç”¨ç­¾åç”Ÿæˆå™¨ <a class="header-anchor" href="#hmac-sha256-authorization-é€šç”¨ç­¾åç”Ÿæˆå™¨" aria-label="Permalink to â€œhmac_sha256_authorization() - é€šç”¨ç­¾åç”Ÿæˆå™¨â€">â€‹</a></h4><p>é€šç”¨çš„äº‘æœåŠ¡å•†APIè®¤è¯ç­¾åç”Ÿæˆå‡½æ•°ï¼Œæ”¯æŒé˜¿é‡Œäº‘ã€åä¸ºäº‘ã€è…¾è®¯äº‘ç­‰å¤šç§äº‘æœåŠ¡å•†ã€‚ ä½¿ç”¨HMAC-SHA256ç®—æ³•ç”Ÿæˆç¬¦åˆå„äº‘æœåŠ¡å•†è§„èŒƒçš„Authorizationå¤´éƒ¨ã€‚ æ‰€æœ‰äº‘æœåŠ¡å•†çš„å·®å¼‚é€šè¿‡æ¨¡æ¿å‚æ•°ä¼ é€’ï¼Œå®ç°å®Œå…¨çš„æœåŠ¡å•†æ— å…³æ€§ã€‚</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ddns.provider._base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_sha256_authorization, sha256_hash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é€šç”¨ç­¾åå‡½æ•°è°ƒç”¨ç¤ºä¾‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">authorization </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_sha256_authorization(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    secret_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">secret_key,                    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­¾åå¯†é’¥ï¼ˆå·²æ´¾ç”Ÿå¤„ç†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># HTTPæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/v1/domains/records&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,               </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># APIè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;limit=20&amp;offset=0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,                </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥è¯¢å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">request_headers,                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯·æ±‚å¤´éƒ¨å­—å…¸</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    body_hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sha256_hash(request_body),      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¯·æ±‚ä½“å“ˆå¸Œ</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    signing_string_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signing_template,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¾…ç­¾åå­—ç¬¦ä¸²æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">    authorization_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth_template        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Authorizationå¤´éƒ¨æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>å‡½æ•°å‚æ•°è¯´æ˜ï¼š</strong></p><table tabindex="0"><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>secret_key</code></td><td><code>str | bytes</code></td><td>ç­¾åå¯†é’¥ï¼Œå·²ç»è¿‡å¯†é’¥æ´¾ç”Ÿå¤„ç†</td></tr><tr><td><code>method</code></td><td><code>str</code></td><td>HTTPè¯·æ±‚æ–¹æ³• (GET, POST, etc.)</td></tr><tr><td><code>path</code></td><td><code>str</code></td><td>APIè¯·æ±‚è·¯å¾„</td></tr><tr><td><code>query</code></td><td><code>str</code></td><td>URLæŸ¥è¯¢å­—ç¬¦ä¸²</td></tr><tr><td><code>headers</code></td><td><code>dict[str, str]</code></td><td>HTTPè¯·æ±‚å¤´éƒ¨</td></tr><tr><td><code>body_hash</code></td><td><code>str</code></td><td>è¯·æ±‚ä½“çš„SHA256å“ˆå¸Œå€¼</td></tr><tr><td><code>signing_string_format</code></td><td><code>str</code></td><td>å¾…ç­¾åå­—ç¬¦ä¸²æ¨¡æ¿ï¼ŒåŒ…å« <code>{HashedCanonicalRequest}</code> å ä½ç¬¦</td></tr><tr><td><code>authorization_format</code></td><td><code>str</code></td><td>Authorizationå¤´éƒ¨æ¨¡æ¿ï¼ŒåŒ…å« <code>{SignedHeaders}</code>, <code>{Signature}</code> å ä½ç¬¦</td></tr></tbody></table><p><strong>æ¨¡æ¿å˜é‡ï¼š</strong></p><ul><li><code>{HashedCanonicalRequest}</code> - è§„èŒƒè¯·æ±‚çš„SHA256å“ˆå¸Œå€¼</li><li><code>{SignedHeaders}</code> - æŒ‰å­—æ¯é¡ºåºæ’åˆ—çš„ç­¾åå¤´éƒ¨åˆ—è¡¨</li><li><code>{Signature}</code> - æœ€ç»ˆçš„HMAC-SHA256ç­¾åå€¼</li></ul><h3 id="å„äº‘æœåŠ¡å•†ç­¾åå®ç°ç¤ºä¾‹" tabindex="-1">å„äº‘æœåŠ¡å•†ç­¾åå®ç°ç¤ºä¾‹ <a class="header-anchor" href="#å„äº‘æœåŠ¡å•†ç­¾åå®ç°ç¤ºä¾‹" aria-label="Permalink to â€œå„äº‘æœåŠ¡å•†ç­¾åå®ç°ç¤ºä¾‹â€">â€‹</a></h3><h4 id="é˜¿é‡Œäº‘-acs3-hmac-sha256" tabindex="-1">é˜¿é‡Œäº‘ (ACS3-HMAC-SHA256) <a class="header-anchor" href="#é˜¿é‡Œäº‘-acs3-hmac-sha256" aria-label="Permalink to â€œé˜¿é‡Œäº‘ (ACS3-HMAC-SHA256)â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, action, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ„å»ºè¯·æ±‚å¤´éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;host&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alidns.aliyuncs.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-acs-action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: action,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-acs-content-sha256&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: sha256_hash(body),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-acs-date&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: timestamp,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-acs-signature-nonce&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: nonce,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-acs-version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2015-01-09&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # é˜¿é‡Œäº‘ç­¾åæ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    auth_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;ACS3-HMAC-SHA256 Credential=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{access_key}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;SignedHeaders=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SignedHeaders</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,Signature=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Signature</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    signing_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ACS3-HMAC-SHA256</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{timestamp}\n{{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HashedCanonicalRequest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç”Ÿæˆç­¾å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    authorization </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_sha256_authorization(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        secret_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">query_string,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        body_hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sha256_hash(body),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        signing_string_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signing_template,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        authorization_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth_template</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authorization</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._http(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">body, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h4 id="è…¾è®¯äº‘-tc3-hmac-sha256" tabindex="-1">è…¾è®¯äº‘ (TC3-HMAC-SHA256) <a class="header-anchor" href="#è…¾è®¯äº‘-tc3-hmac-sha256" aria-label="Permalink to â€œè…¾è®¯äº‘ (TC3-HMAC-SHA256)â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, action, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">params):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è…¾è®¯äº‘éœ€è¦æ´¾ç”Ÿå¯†é’¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    derived_key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._derive_signing_key(date, service, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.token)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ„å»ºè¯·æ±‚å¤´éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;content-type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;host&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dnspod.tencentcloudapi.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-tc-action&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: action,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-tc-timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: timestamp,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;x-tc-version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2021-03-23&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è…¾è®¯äº‘ç­¾åæ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    auth_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;TC3-HMAC-SHA256 Credential=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{secret_id}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{date}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{service}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/tc3_request, &quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;SignedHeaders=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">SignedHeaders</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">, Signature=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Signature</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    signing_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;TC3-HMAC-SHA256</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{timestamp}\n{date}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{service}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/tc3_request</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n{{</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">HashedCanonicalRequest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç”Ÿæˆç­¾å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    authorization </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_sha256_authorization(</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        secret_key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">derived_key,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ³¨æ„ï¼šä½¿ç”¨æ´¾ç”Ÿå¯†é’¥</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        method</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        body_hash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sha256_hash(body),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        signing_string_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signing_template,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">        authorization_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">auth_template</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    headers[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;authorization&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authorization</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._http(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">body</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">body, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="è¾…åŠ©å·¥å…·å‡½æ•°" tabindex="-1">è¾…åŠ©å·¥å…·å‡½æ•° <a class="header-anchor" href="#è¾…åŠ©å·¥å…·å‡½æ•°" aria-label="Permalink to â€œè¾…åŠ©å·¥å…·å‡½æ•°â€">â€‹</a></h3><h4 id="sha256-hash-sha256å“ˆå¸Œè®¡ç®—" tabindex="-1"><code>sha256_hash()</code> - SHA256å“ˆå¸Œè®¡ç®— <a class="header-anchor" href="#sha256-hash-sha256å“ˆå¸Œè®¡ç®—" aria-label="Permalink to â€œsha256_hash() - SHA256å“ˆå¸Œè®¡ç®—â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ddns.provider._base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sha256_hash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¡ç®—å­—ç¬¦ä¸²çš„SHA256å“ˆå¸Œ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hash_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sha256_hash(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;request body content&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¡ç®—å­—èŠ‚æ•°æ®çš„SHA256å“ˆå¸Œ  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hash_value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sha256_hash(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;binary data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="hmac-sha256-hmac-sha256ç­¾åå¯¹è±¡" tabindex="-1"><code>hmac_sha256()</code> - HMAC-SHA256ç­¾åå¯¹è±¡ <a class="header-anchor" href="#hmac-sha256-hmac-sha256ç­¾åå¯¹è±¡" aria-label="Permalink to â€œhmac_sha256() - HMAC-SHA256ç­¾åå¯¹è±¡â€">â€‹</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ddns.provider._base </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_sha256</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”ŸæˆHMAC-SHA256å­—èŠ‚ç­¾å</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å– HMAC å¯¹è±¡ï¼Œå¯è°ƒç”¨ .digest() è·å–å­—èŠ‚æˆ– .hexdigest() è·å–åå…­è¿›åˆ¶å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hmac_obj </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_sha256(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;secret_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;message_to_sign&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signature_bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_obj.digest()        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å­—èŠ‚æ ¼å¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">signature_hex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> hmac_obj.hexdigest()       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åå…­è¿›åˆ¶å­—ç¬¦ä¸²æ ¼å¼</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><hr><h3 id="ğŸ› ï¸-å¼€å‘å·¥å…·æ¨è" tabindex="-1">ğŸ› ï¸ å¼€å‘å·¥å…·æ¨è <a class="header-anchor" href="#ğŸ› ï¸-å¼€å‘å·¥å…·æ¨è" aria-label="Permalink to â€œğŸ› ï¸ å¼€å‘å·¥å…·æ¨èâ€">â€‹</a></h3><ul><li>æœ¬åœ°å¼€å‘ç¯å¢ƒï¼šVSCode</li><li>åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ï¼šGitHub Codespaces æˆ– github.dev</li></ul><h3 id="ğŸ¯-å¸¸è§é—®é¢˜è§£å†³" tabindex="-1">ğŸ¯ å¸¸è§é—®é¢˜è§£å†³ <a class="header-anchor" href="#ğŸ¯-å¸¸è§é—®é¢˜è§£å†³" aria-label="Permalink to â€œğŸ¯ å¸¸è§é—®é¢˜è§£å†³â€">â€‹</a></h3><ol><li><strong>Q: ä¸ºä»€ä¹ˆé€‰æ‹©SimpleProviderè€Œä¸æ˜¯BaseProviderï¼Ÿ</strong><ul><li>A: å¦‚æœDNSæœåŠ¡å•†åªæä¾›æ›´æ–°APIï¼Œæ²¡æœ‰æŸ¥è¯¢APIï¼Œé€‰æ‹©SimpleProvideræ›´ç®€å•é«˜æ•ˆ</li></ul></li></ol><hr><h2 id="ğŸ‰-æ€»ç»“" tabindex="-1">ğŸ‰ æ€»ç»“ <a class="header-anchor" href="#ğŸ‰-æ€»ç»“" aria-label="Permalink to â€œğŸ‰ æ€»ç»“â€">â€‹</a></h2><h3 id="å¿«é€Ÿæ£€æŸ¥æ¸…å•" tabindex="-1">å¿«é€Ÿæ£€æŸ¥æ¸…å• <a class="header-anchor" href="#å¿«é€Ÿæ£€æŸ¥æ¸…å•" aria-label="Permalink to â€œå¿«é€Ÿæ£€æŸ¥æ¸…å•â€">â€‹</a></h3><ul><li>[ ] é€‰æ‹©äº†åˆé€‚çš„åŸºç±»ï¼ˆ<code>SimpleProvider</code> vs <code>BaseProvider</code>ï¼‰</li><li>[ ] å®ç°äº†æ‰€æœ‰å¿…éœ€çš„æ–¹æ³•(GPTæˆ–è€…Copilotè¾…åŠ©)</li><li>[ ] æ·»åŠ äº†é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•</li><li>[ ] ç¼–å†™äº†å®Œæ•´çš„å•å…ƒæµ‹è¯•(ä½¿ç”¨GPTæˆ–Copilotç”Ÿæˆ)</li><li>[ ] æµ‹è¯•äº†å„ç§è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯åœºæ™¯</li><li>[ ] æ›´æ–°äº†ç›¸å…³æ–‡æ¡£</li></ul><h2 id="happy-coding-ğŸš€" tabindex="-1">Happy Coding! ğŸš€ <a class="header-anchor" href="#happy-coding-ğŸš€" aria-label="Permalink to â€œHappy Coding! ğŸš€â€">â€‹</a></h2></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/NewFuture/DDNS/edit/master/docs/dev/provider.md" target="_blank" rel="noreferrer" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-73dafb42>æœ€åæ›´æ–°æ—¶é—´: <time datetime="2026-01-13T17:29:31.000Z" data-v-73dafb42></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/dev/config" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>ä¸Šä¸€é¡µ</span><span class="title" data-v-1bcd8184>é…ç½®æ–‡æ¡£</span><!--]--></a></div><div class="pager" data-v-1bcd8184><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-304c8b69 data-v-5b9946f5><div class="container" data-v-5b9946f5><p class="message" data-v-5b9946f5>Released under the MIT License</p><p class="copyright" data-v-5b9946f5>Copyright Â© 2016 ~ 2026 NewFuture</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"config_cli.md\":\"BBrzbkqJ\",\"config_env.md\":\"zMLMFRbX\",\"config_json.md\":\"4Yee3bbB\",\"dev_config.md\":\"Bjr7qD1R\",\"dev_provider.md\":\"CZunGOLF\",\"docker.md\":\"C4mJlWQM\",\"en_config_cli.md\":\"CabiTvk_\",\"en_config_env.md\":\"B1SySI5Y\",\"en_config_json.md\":\"BMonDKWt\",\"en_dev_config.md\":\"-zaHSDyG\",\"en_dev_provider.md\":\"DGGAfHGu\",\"en_docker.md\":\"BgwhgM4b\",\"en_index.md\":\"BGP745NK\",\"en_install.md\":\"Zc5dHwGq\",\"en_providers_51dns.md\":\"CQ8KDbTf\",\"en_providers_alidns.md\":\"B6OUdG7-\",\"en_providers_aliesa.md\":\"741zlENc\",\"en_providers_callback.md\":\"CyQdNKu0\",\"en_providers_cloudflare.md\":\"udL-y0sQ\",\"en_providers_debug.md\":\"Bjsspx6U\",\"en_providers_dnscom.md\":\"CTJzytm0\",\"en_providers_dnspod.md\":\"DQp8LGjR\",\"en_providers_dnspod_com.md\":\"BS-1qzwU\",\"en_providers_edgeone.md\":\"MXRJuB4E\",\"en_providers_edgeone_dns.md\":\"Dqy3jXdd\",\"en_providers_he.md\":\"BmC670yy\",\"en_providers_huaweidns.md\":\"DLT579og\",\"en_providers_index.md\":\"CRPNSSd8\",\"en_providers_namesilo.md\":\"SPMmKaR_\",\"en_providers_noip.md\":\"Cjz2kuIR\",\"en_providers_tencentcloud.md\":\"BC5sVqWu\",\"index.md\":\"CWSfISyg\",\"install.md\":\"DYyj-16I\",\"providers_51dns.md\":\"p308YG76\",\"providers_alidns.md\":\"D_X9Xmdt\",\"providers_aliesa.md\":\"Dq9xr4fk\",\"providers_callback.md\":\"GoQKm_2v\",\"providers_cloudflare.md\":\"D-8tIeNE\",\"providers_debug.md\":\"qssBJHYu\",\"providers_dnscom.md\":\"D9yex6t5\",\"providers_dnspod.md\":\"B1GvgKAl\",\"providers_dnspod_com.md\":\"D2YiRJ9M\",\"providers_edgeone.md\":\"CM16Dzdk\",\"providers_edgeone_dns.md\":\"CWUlVrwo\",\"providers_he.md\":\"CJku_W7U\",\"providers_huaweidns.md\":\"xtWUYrlJ\",\"providers_index.md\":\"Cvi8VxpX\",\"providers_namesilo.md\":\"DG3Eucxr\",\"providers_noip.md\":\"CtukmeFh\",\"providers_tencentcloud.md\":\"BvVlh1Pr\",\"release.md\":\"D1Kyj1g7\"}");function deserializeFunctions(r){return Array.isArray(r)?r.map(deserializeFunctions):typeof r=="object"&&r!==null?Object.keys(r).reduce((t,n)=>(t[n]=deserializeFunctions(r[n]),t),{}):typeof r=="string"&&r.startsWith("_vp-fn_")?new Function(`return ${r.slice(7)}`)():r};window.__VP_SITE_DATA__=deserializeFunctions(JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"DDNS Documentation\",\"description\":\"è‡ªåŠ¨æ›´æ–° DNS è§£æåˆ°æœ¬æœº IP åœ°å€\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/img/ddns.svg\",\"siteTitle\":\"DDNS\",\"nav\":[{\"text\":\"é¦–é¡µ\",\"link\":\"/\"},{\"text\":\"Docker\",\"link\":\"/docker\"},{\"text\":\"å®‰è£…\",\"link\":\"/install\"},{\"text\":\"é…ç½®æ–¹å¼\",\"items\":[{\"text\":\"å‘½ä»¤è¡Œå‚æ•°\",\"link\":\"/config/cli\"},{\"text\":\"ç¯å¢ƒå˜é‡\",\"link\":\"/config/env\"},{\"text\":\"JSONé…ç½®\",\"link\":\"/config/json\"}]},{\"text\":\"DNSæœåŠ¡å•†\",\"items\":[{\"text\":\"æ¦‚è¿°\",\"link\":\"/providers/\"},{\"text\":\"é˜¿é‡ŒDNS\",\"link\":\"/providers/alidns\"},{\"text\":\"DNSPod\",\"link\":\"/providers/dnspod\"},{\"text\":\"Cloudflare\",\"link\":\"/providers/cloudflare\"}]},{\"text\":\"å¼€å‘æ–‡æ¡£\",\"items\":[{\"text\":\"é…ç½®æ–‡æ¡£\",\"link\":\"/dev/config\"},{\"text\":\"Providerå¼€å‘\",\"link\":\"/dev/provider\"}]}],\"sidebar\":{\"/config/\":[{\"text\":\"é…ç½®æ–¹å¼\",\"items\":[{\"text\":\"å‘½ä»¤è¡Œå‚æ•°\",\"link\":\"/config/cli\"},{\"text\":\"ç¯å¢ƒå˜é‡\",\"link\":\"/config/env\"},{\"text\":\"JSONé…ç½®æ–‡ä»¶\",\"link\":\"/config/json\"}]}],\"/providers/\":[{\"text\":\"DNS æœåŠ¡å•†\",\"items\":[{\"text\":\"æ‰€æœ‰æœåŠ¡å•†\",\"link\":\"/providers/\"},{\"text\":\"é˜¿é‡ŒDNS\",\"link\":\"/providers/alidns\"},{\"text\":\"é˜¿é‡Œäº‘ESA\",\"link\":\"/providers/aliesa\"},{\"text\":\"51DNS\",\"link\":\"/providers/51dns\"},{\"text\":\"Cloudflare\",\"link\":\"/providers/cloudflare\"},{\"text\":\"DNSPod\",\"link\":\"/providers/dnspod\"},{\"text\":\"DNSPodå›½é™…ç‰ˆ\",\"link\":\"/providers/dnspod_com\"},{\"text\":\"è…¾è®¯äº‘DNS\",\"link\":\"/providers/tencentcloud\"},{\"text\":\"è…¾è®¯äº‘EdgeOne\",\"link\":\"/providers/edgeone\"},{\"text\":\"åä¸ºäº‘DNS\",\"link\":\"/providers/huaweidns\"},{\"text\":\"HE.net\",\"link\":\"/providers/he\"},{\"text\":\"NameSilo\",\"link\":\"/providers/namesilo\"},{\"text\":\"No-IP\",\"link\":\"/providers/noip\"},{\"text\":\"å›è°ƒAPI\",\"link\":\"/providers/callback\"},{\"text\":\"è°ƒè¯•æ¨¡å¼\",\"link\":\"/providers/debug\"}]}],\"/dev/\":[{\"text\":\"å¼€å‘æ–‡æ¡£\",\"items\":[{\"text\":\"é…ç½®æ–‡æ¡£\",\"link\":\"/dev/config\"},{\"text\":\"Providerå¼€å‘æŒ‡å—\",\"link\":\"/dev/provider\"}]}]},\"editLink\":{\"pattern\":\"_vp-fn_({ filePath }) => {\\n        if (filePath === \\\"index.md\\\") {\\n          return \\\"https://github.com/NewFuture/DDNS/edit/master/README.md\\\";\\n        }\\n        if (filePath === \\\"en/index.md\\\") {\\n          return \\\"https://github.com/NewFuture/DDNS/edit/master/README.en.md\\\";\\n        }\\n        return `https://github.com/NewFuture/DDNS/edit/master/docs/${filePath}`;\\n      }\",\"text\":\"åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ\"},\"lastUpdated\":{\"text\":\"æœ€åæ›´æ–°æ—¶é—´\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"short\"}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/NewFuture/DDNS\"}],\"footer\":{\"message\":\"Released under the MIT License\",\"copyright\":\"Copyright Â© 2016 ~ 2026 NewFuture\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\"}}}}}}},\"outline\":{\"level\":[2,3],\"label\":\"é¡µé¢å¯¼èˆª\"},\"docFooter\":{\"prev\":\"ä¸Šä¸€é¡µ\",\"next\":\"ä¸‹ä¸€é¡µ\"},\"returnToTopLabel\":\"è¿”å›é¡¶éƒ¨\",\"sidebarMenuLabel\":\"èœå•\",\"darkModeSwitchLabel\":\"ä¸»é¢˜\",\"lightModeSwitchTitle\":\"åˆ‡æ¢åˆ°æµ…è‰²æ¨¡å¼\",\"darkModeSwitchTitle\":\"åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼\"},\"locales\":{\"root\":{\"label\":\"ç®€ä½“ä¸­æ–‡\",\"lang\":\"zh-CN\"},\"en\":{\"label\":\"English\",\"lang\":\"en-US\",\"link\":\"/en/\",\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/en/\"},{\"text\":\"Docker\",\"link\":\"/en/docker\"},{\"text\":\"Install\",\"link\":\"/en/install\"},{\"text\":\"Configuration\",\"items\":[{\"text\":\"CLI\",\"link\":\"/en/config/cli\"},{\"text\":\"Environment\",\"link\":\"/en/config/env\"},{\"text\":\"JSON Config\",\"link\":\"/en/config/json\"}]},{\"text\":\"DNS Providers\",\"items\":[{\"text\":\"Overview\",\"link\":\"/en/providers/\"},{\"text\":\"AliDNS\",\"link\":\"/en/providers/alidns\"},{\"text\":\"DNSPod\",\"link\":\"/en/providers/dnspod\"},{\"text\":\"Cloudflare\",\"link\":\"/en/providers/cloudflare\"}]},{\"text\":\"Development\",\"items\":[{\"text\":\"Config Docs\",\"link\":\"/en/dev/config\"},{\"text\":\"Provider Guide\",\"link\":\"/en/dev/provider\"}]}],\"sidebar\":{\"/en/config/\":[{\"text\":\"Configuration\",\"items\":[{\"text\":\"CLI Parameters\",\"link\":\"/en/config/cli\"},{\"text\":\"Environment Variables\",\"link\":\"/en/config/env\"},{\"text\":\"JSON Configuration\",\"link\":\"/en/config/json\"}]}],\"/en/providers/\":[{\"text\":\"DNS Providers\",\"items\":[{\"text\":\"All Providers\",\"link\":\"/en/providers/\"},{\"text\":\"AliDNS\",\"link\":\"/en/providers/alidns\"},{\"text\":\"Ali ESA\",\"link\":\"/en/providers/aliesa\"},{\"text\":\"51DNS\",\"link\":\"/en/providers/51dns\"},{\"text\":\"Cloudflare\",\"link\":\"/en/providers/cloudflare\"},{\"text\":\"DNSPod\",\"link\":\"/en/providers/dnspod\"},{\"text\":\"DNSPod Global\",\"link\":\"/en/providers/dnspod_com\"},{\"text\":\"Tencent Cloud DNS\",\"link\":\"/en/providers/tencentcloud\"},{\"text\":\"Tencent Cloud EdgeOne\",\"link\":\"/en/providers/edgeone\"},{\"text\":\"Huawei Cloud DNS\",\"link\":\"/en/providers/huaweidns\"},{\"text\":\"HE.net\",\"link\":\"/en/providers/he\"},{\"text\":\"NameSilo\",\"link\":\"/en/providers/namesilo\"},{\"text\":\"No-IP\",\"link\":\"/en/providers/noip\"},{\"text\":\"Callback API\",\"link\":\"/en/providers/callback\"},{\"text\":\"Debug Mode\",\"link\":\"/en/providers/debug\"}]}],\"/en/dev/\":[{\"text\":\"Development\",\"items\":[{\"text\":\"Config Documentation\",\"link\":\"/en/dev/config\"},{\"text\":\"Provider Development\",\"link\":\"/en/dev/provider\"}]}]},\"editLink\":{\"pattern\":\"_vp-fn_({ filePath }) => {\\n            if (filePath === \\\"index.md\\\") {\\n              return \\\"https://github.com/NewFuture/DDNS/edit/master/README.md\\\";\\n            }\\n            if (filePath === \\\"en/index.md\\\") {\\n              return \\\"https://github.com/NewFuture/DDNS/edit/master/README.en.md\\\";\\n            }\\n            return `https://github.com/NewFuture/DDNS/edit/master/docs/${filePath}`;\\n          }\",\"text\":\"Edit this page on GitHub\"},\"lastUpdated\":{\"text\":\"Last updated\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"short\"}},\"footer\":{\"message\":\"Released under the MIT License\",\"copyright\":\"Copyright Â© 2016 ~ 2026 NewFuture\"},\"outline\":{\"label\":\"On this page\"},\"docFooter\":{\"prev\":\"Previous\",\"next\":\"Next\"},\"returnToTopLabel\":\"Return to top\",\"sidebarMenuLabel\":\"Menu\",\"darkModeSwitchLabel\":\"Appearance\",\"lightModeSwitchTitle\":\"Switch to light mode\",\"darkModeSwitchTitle\":\"Switch to dark mode\"}}},\"scrollOffset\":134,\"cleanUrls\":true,\"additionalConfig\":{}}"));</script>
    
  </body>
</html>