import{_ as i,c as a,o as n,aj as s,j as e,a as l,ak as r}from"./chunks/framework.CFe3ezYR.js";const b=JSON.parse('{"title":"DDNS","description":"","frontmatter":{},"headers":[],"relativePath":"index.md","filePath":"index.md","lastUpdated":0}'),h={name:"index.md"};function d(o,t,c,k,u,g){return n(),a("div",null,[...t[0]||(t[0]=[s("",18),e("ul",null,[e("li",null,[e("h4",{id:"docker-推荐",tabindex:"-1"},[l("Docker（推荐） "),e("a",{class:"header-anchor",href:"#docker-推荐","aria-label":"Permalink to “Docker（推荐）”"},"​")]),e("p",null,[l("详细说明和高级用法请查看 "),e("a",{href:"https://github.com/NewFuture/DDNS/blob/master/docker.md",target:"_blank"},"Docker 使用文档")]),e("details",null,[e("summary",{markdown:"span"},"支持命令行，配置文件，和环境变量传参"),e("ul",null,[e("li",null,[e("p",null,"命令行cli"),e("div",{class:"language-sh line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"sh"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," newfuture/ddns"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -h")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br")])])]),e("li",null,[e("p",null,[l("使用配置文件（docker 工作目录 "),e("code",null,"/ddns/"),l("，默认配置位置 "),e("code",null,"/ddns/config.json"),l("）：")]),e("div",{class:"language-sh line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"sh"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /host/config/:/ddns/"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --network"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," host"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," newfuture/ddns")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br")])])]),e("li",null,[e("p",null,"使用环境变量："),e("div",{class:"language-sh line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"sh"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," DDNS_DNS=dnspod"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," DDNS_ID="),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"12345"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," DDNS_TOKEN=mytokenkey"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -e"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," DDNS_IPV4=ddns.newfuture.cc"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --network"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," host"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  newfuture/ddns")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br")])])])])])]),e("li",null,[e("h4",{id:"二进制版-单文件-无需-python",tabindex:"-1"},[l("二进制版（单文件，无需 python） "),e("a",{class:"header-anchor",href:"#二进制版-单文件-无需-python","aria-label":"Permalink to “二进制版（单文件，无需 python）”"},"​")]),e("p",null,[l("前往"),e("a",{href:"https://github.com/NewFuture/DDNS/releases/latest",target:"_blank",rel:"noreferrer"},"release下载对应版本")]),e("p",null,"也可使用一键安装脚本自动下载并安装对应平台的二进制："),e("div",{class:"language-bash line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"bash"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"curl"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," -#fSL"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://ddns.newfuture.cc/install.sh"),e("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sh")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br")])]),e("p",null,[l("提示：安装到系统目录（如 /usr/local/bin）可能需要 root 或 sudo 权限；若权限不足，可改为 "),e("code",null,"sudo sh"),l(" 运行。")]),e("p",null,[l("详细说明请查看 "),e("a",{href:"https://github.com/NewFuture/DDNS/blob/master/install.md",target:"_blank"},"一键安装文档")])]),e("li",null,[e("h4",{id:"pip-安装-需要-pip-或-easy-install",tabindex:"-1"},[l("pip 安装（需要 pip 或 easy_install） "),e("a",{class:"header-anchor",href:"#pip-安装-需要-pip-或-easy-install","aria-label":"Permalink to “pip 安装（需要 pip 或 easy_install）”"},"​")]),e("ol",null,[e("li",null,[l("安装 ddns: "),e("code",null,"pip install ddns"),l(" 或 "),e("code",null,"easy_install ddns")]),e("li",null,[l("运行: "),e("code",null,"ddns -h"),l(" 或者 "),e("code",null,"python -m ddns")])])]),e("li",null,[e("h4",{id:"源码运行-无任何依赖-需-python-环境",tabindex:"-1"},[l("源码运行（无任何依赖，需 python 环境） "),e("a",{class:"header-anchor",href:"#源码运行-无任何依赖-需-python-环境","aria-label":"Permalink to “源码运行（无任何依赖，需 python 环境）”"},"​")]),e("ol",null,[e("li",null,[l("clone 或者 "),e("a",{href:"https://github.com/NewFuture/DDNS/archive/master.zip",target:"_blank",rel:"noreferrer"},"下载此仓库"),l(" 并解压")]),e("li",null,[l("运行 "),e("code",null,"python -m ddns")])])])],-1),s("",12),e("details",{open:""},[e("summary",{markdown:"span"},"config.json 配置文件"),e("ul",null,[e("li",null,"首次运行会自动生成一个模板配置文件"),e("li",null,[l("可以使用 "),e("code",null,"-c"),l(" 使用指定的配置文件（默认读取当前目录的 config.json）")]),e("li",null,"推荐使用 vscode 等支持 JsonSchema 的编辑器编辑配置文件"),e("li",null,[l("查看 "),e("a",{href:"https://github.com/NewFuture/DDNS/blob/master/config/json.md",target:"_blank"},"JSON配置文件详细文档"),l(" 了解完整的配置选项和示例")])]),e("div",{class:"language-bash line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"bash"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ddns"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -c"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," path/to/config.json")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 或者python运行")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"python"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -m"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ddns"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -c"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /path/to/config.json")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 远程配置文件")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ddns"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -c"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://ddns.newfuture.cc/tests/config/debug.json")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br")])]),e("h4",{id:"配置参数表",tabindex:"-1"},[l("配置参数表 "),e("a",{class:"header-anchor",href:"#配置参数表","aria-label":"Permalink to “配置参数表”"},"​")]),e("table",{tabindex:"0"},[e("thead",null,[e("tr",null,[e("th",{style:{"text-align":"center"}},"key"),e("th",{style:{"text-align":"center"}},"type"),e("th",{style:{"text-align":"center"}},"required"),e("th",{style:{"text-align":"center"}},"default"),e("th",{style:{"text-align":"center"}},"description"),e("th",null,"tips")])]),e("tbody",null,[e("tr",null,[e("td",{style:{"text-align":"center"}},"id"),e("td",{style:{"text-align":"center"}},"string"),e("td",{style:{"text-align":"center"}},"√"),e("td",{style:{"text-align":"center"}},"无"),e("td",{style:{"text-align":"center"}},"api 访问 ID"),e("td",null,[l("Cloudflare 为邮箱（使用 Token 时留空）"),e("br"),l("HE.net 可留空"),e("br"),l("华为云为 Access Key ID (AK)")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"token"),e("td",{style:{"text-align":"center"}},"string"),e("td",{style:{"text-align":"center"}},"√"),e("td",{style:{"text-align":"center"}},"无"),e("td",{style:{"text-align":"center"}},"api 授权 token"),e("td",null,[l("部分平台叫 secret key，"),e("strong",null,"反馈粘贴时删除")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"dns"),e("td",{style:{"text-align":"center"}},"string"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,'"dnspod"')]),e("td",{style:{"text-align":"center"}},"dns 服务商"),e("td",null,[l("阿里 DNS 为 "),e("code",null,"alidns"),l("，阿里ESA为 "),e("code",null,"aliesa"),l("，Cloudflare 为 "),e("code",null,"cloudflare"),l("，dns.com 为 "),e("code",null,"dnscom"),l("，DNSPOD 国内为 "),e("code",null,"dnspod"),l("，DNSPOD 国际为 "),e("code",null,"dnspod_com"),l("，HE.net 为 "),e("code",null,"he"),l("，华为云为 "),e("code",null,"huaweidns"),l("，NameSilo 为 "),e("code",null,"namesilo"),l("，腾讯云为 "),e("code",null,"tencentcloud"),l("，腾讯云EdgeOne为 "),e("code",null,"edgeone"),l("，No-IP 为 "),e("code",null,"noip"),l("，自定义回调为 "),e("code",null,"callback"),l("。部分服务商有"),e("a",{href:"/providers/"},"详细配置文档")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"ipv4"),e("td",{style:{"text-align":"center"}},"array"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,"[]")]),e("td",{style:{"text-align":"center"}},"ipv4 域名列表"),e("td",null,[l("为 "),e("code",null,"[]"),l(" 时，不会获取和更新 IPv4 地址")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"ipv6"),e("td",{style:{"text-align":"center"}},"array"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,"[]")]),e("td",{style:{"text-align":"center"}},"ipv6 域名列表"),e("td",null,[l("为 "),e("code",null,"[]"),l(" 时，不会获取和更新 IPv6 地址")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"index4"),e("td",{style:{"text-align":"center"}},"string|int|array"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,'"default"')]),e("td",{style:{"text-align":"center"}},"ipv4 获取方式"),e("td",null,[l("可设置 "),e("code",null,"网卡"),l("、"),e("code",null,"内网"),l("、"),e("code",null,"公网"),l("、"),e("code",null,"正则"),l(" 等方式")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"index6"),e("td",{style:{"text-align":"center"}},"string|int|array"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,'"default"')]),e("td",{style:{"text-align":"center"}},"ipv6 获取方式"),e("td",null,[l("可设置 "),e("code",null,"网卡"),l("、"),e("code",null,"内网"),l("、"),e("code",null,"公网"),l("、"),e("code",null,"正则"),l(" 等方式")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"ttl"),e("td",{style:{"text-align":"center"}},"number"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,"null")]),e("td",{style:{"text-align":"center"}},"DNS 解析 TTL 时间"),e("td",null,"不设置采用 DNS 默认策略")]),e("tr",null,[e("td",{style:{"text-align":"center"}},"proxy"),e("td",{style:{"text-align":"center"}},"string|array"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},"无"),e("td",{style:{"text-align":"center"}},[l("HTTP 代理格式："),e("code",null,"http://host:port")]),e("td",null,[l("多代理逐个尝试直到成功，"),e("code",null,"DIRECT"),l(" 为直连")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"ssl"),e("td",{style:{"text-align":"center"}},"string|boolean"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,'"auto"')]),e("td",{style:{"text-align":"center"}},"SSL证书验证方式"),e("td",null,[e("code",null,"true"),l("（强制验证）、"),e("code",null,"false"),l("（禁用验证）、"),e("code",null,'"auto"'),l("（自动降级）或自定义CA证书文件路径")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"debug"),e("td",{style:{"text-align":"center"}},"bool"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,"false")]),e("td",{style:{"text-align":"center"}},"是否开启调试"),e("td",null,[l("调试模式，仅命令行参数"),e("code",null,"--debug"),l("有效")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"cache"),e("td",{style:{"text-align":"center"}},"string|bool"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,"true")]),e("td",{style:{"text-align":"center"}},"是否缓存记录"),e("td",null,[l("正常情况打开避免频繁更新，默认位置为临时目录下 "),e("code",null,"ddns.cache"),l("，也可以指定一个具体路径")])]),e("tr",null,[e("td",{style:{"text-align":"center"}},"log"),e("td",{style:{"text-align":"center"}},"object"),e("td",{style:{"text-align":"center"}},"No"),e("td",{style:{"text-align":"center"}},[e("code",null,"null")]),e("td",{style:{"text-align":"center"}},"日志配置（可选）"),e("td",null,[l("日志配置对象，支持"),e("code",null,"level"),l("、"),e("code",null,"file"),l("、"),e("code",null,"format"),l("、"),e("code",null,"datefmt"),l("参数")])])])]),e("h4",{id:"index4-和-index6-参数说明",tabindex:"-1"},[l("index4 和 index6 参数说明 "),e("a",{class:"header-anchor",href:"#index4-和-index6-参数说明","aria-label":"Permalink to “index4 和 index6 参数说明”"},"​")]),e("ul",null,[e("li",null,[l("数字（"),e("code",null,"0"),l("，"),e("code",null,"1"),l("，"),e("code",null,"2"),l("，"),e("code",null,"3"),l("等）：第 i 个网卡 ip")]),e("li",null,[l("字符串 "),e("code",null,'"default"'),l("（或者无此项）：系统访问外网默认 IP")]),e("li",null,[l("字符串 "),e("code",null,'"public"'),l("：使用公网 ip（使用公网 API 查询，url 的简化模式）")]),e("li",null,[l("字符串 "),e("code",null,'"url:xxx"'),l("：打开 URL "),e("code",null,"xxx"),l("（如："),e("code",null,'"url:http://ip.sb"'),l("），从返回的数据提取 IP 地址")]),e("li",null,[l("字符串 "),e("code",null,'"regex:xxx"'),l(" 正则表达（如 "),e("code",null,'"regex:192.*"'),l("）：提取 "),e("code",null,"ifconfig"),l("/"),e("code",null,"ipconfig"),l(" 中与之匹配的首个 IP 地址，"),e("strong",null,"注意 json 转义"),l("（"),e("code",null,"\\"),l("要写成"),e("code",null,"\\\\"),l("） "),e("ul",null,[e("li",null,[e("code",null,'"192.*"'),l(" 表示 192 开头的所有 ip（注意 "),e("code",null,"regex:"),l(" 不可省略）")]),e("li",null,[l("如果想匹配 "),e("code",null,"10.00.xxxx"),l(" 应该写成 "),e("code",null,'"regex:10\\\\.00\\\\..*"'),l("（"),e("code",null,'"\\\\"'),l(" json 转义成 "),e("code",null,"\\"),l("）")])])]),e("li",null,[l("字符串 "),e("code",null,'"cmd:xxxx"'),l("：执行命令 "),e("code",null,"xxxx"),l(" 的 stdout 输出结果作为目标 IP")]),e("li",null,[l("字符串 "),e("code",null,'"shell:xxx"'),l("：使用系统 shell 运行 "),e("code",null,"xxx"),l("，并把结果 stdout 作为目标 IP")]),e("li",null,[e("code",null,"false"),l("：强制禁止更新 ipv4 或 ipv6 的 DNS 解析")]),e("li",null,[l("列表：依次执行列表中的 index 规则，并将最先获得的结果作为目标 IP "),e("ul",null,[e("li",null,[l("例如 "),e("code",null,'["public", "regex:172\\\\..*"]'),l(" 将先查询公网 API，未获取到 IP 后再从本地寻找 172 开头的 IP")])])])]),e("h4",{id:"自定义回调配置说明",tabindex:"-1"},[l("自定义回调配置说明 "),e("a",{class:"header-anchor",href:"#自定义回调配置说明","aria-label":"Permalink to “自定义回调配置说明”"},"​")]),e("ul",null,[e("li",null,[e("code",null,"id"),l(" 字段填写回调地址，以 HTTP 或 HTTPS 开头，推荐采用 HTTPS 方式的回调 API，支持变量替换功能。")]),e("li",null,[e("code",null,"token"),l(" 字段为 POST 请求参数（JSON对象或JSON字符串），本字段为空或不存在则使用 GET 方式发起回调。当 JSON 的参数值包含下表所示的常量字符串时，会自动替换为实际内容。")])]),e("p",null,[l("详细配置指南请查看："),e("a",{href:"https://github.com/NewFuture/DDNS/blob/master/providers/callback.md",target:"_blank"},"Callback Provider 配置文档")]),e("table",{tabindex:"0"},[e("thead",null,[e("tr",null,[e("th",null,"常量名称"),e("th",null,"常量内容"),e("th",null,"说明")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("code",null,"__DOMAIN__")]),e("td",null,"DDNS 域名"),e("td")]),e("tr",null,[e("td",null,[e("code",null,"__IP__")]),e("td",null,"获取的对应类型的 IP 地址"),e("td")]),e("tr",null,[e("td",null,[e("code",null,"__RECORDTYPE__")]),e("td",null,"DDNS 记录类型"),e("td")]),e("tr",null,[e("td",null,[e("code",null,"__TTL__")]),e("td",null,"DDNS TTL"),e("td")]),e("tr",null,[e("td",null,[e("code",null,"__TIMESTAMP__")]),e("td",null,"请求发起时间戳"),e("td",null,"包含小数")])])]),e("h4",{id:"配置示例",tabindex:"-1"},[l("配置示例 "),e("a",{class:"header-anchor",href:"#配置示例","aria-label":"Permalink to “配置示例”"},"​")]),e("div",{class:"language-json line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"json"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "$schema"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"https://ddns.newfuture.cc/schema/v4.0.json"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "id"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"12345"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "token"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"mytokenkey"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "dns"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"dnspod 或 dnspod_com 或 alidns 或 aliesa 或 dnscom 或 cloudflare 或 he 或 huaweidns 或 namesilo 或 tencentcloud 或 noip 或 callback"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "ipv4"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ["),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ddns.newfuture.cc"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ipv4.ddns.newfuture.cc"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "ipv6"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ["),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ddns.newfuture.cc"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"ipv6.ddns.newfuture.cc"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "index4"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "index6"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"public"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "ttl"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"600"),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "proxy"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ["),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"http://127.0.0.1:1080"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"DIRECT"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"],")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'  "log"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": {")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'    "level"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"DEBUG"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'    "file"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"dns.log"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'    "datefmt"'),e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"%Y-%m-%dT%H:%M:%S"')]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br"),e("span",{class:"line-number"},"13"),e("br"),e("span",{class:"line-number"},"14"),e("br"),e("span",{class:"line-number"},"15"),e("br"),e("span",{class:"line-number"},"16"),e("br"),e("span",{class:"line-number"},"17"),e("br")])])],-1),e("h2",{id:"定时任务",tabindex:"-1"},[l("定时任务 "),e("a",{class:"header-anchor",href:"#定时任务","aria-label":"Permalink to “定时任务”"},"​")],-1),e("details",null,[e("summary",{markdown:"span"},"使用内置的 task 命令设置定时任务（默认每 5 分钟检查一次 IP，自动更新）"),e("p",null,[l("DDNS 提供内置的 "),e("code",null,"task"),l(" 子命令来管理定时任务，支持跨平台自动化部署：")]),e("h3",{id:"高级管理",tabindex:"-1"},[l("高级管理 "),e("a",{class:"header-anchor",href:"#高级管理","aria-label":"Permalink to “高级管理”"},"​")]),e("div",{class:"language-bash line-numbers-mode"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"bash"),e("pre",{class:"shiki shiki-themes github-light github-dark",style:{"--shiki-light":"#24292e","--shiki-dark":"#e1e4e8","--shiki-light-bg":"#fff","--shiki-dark-bg":"#24292e"},tabindex:"0",dir:"ltr"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 安装并指定更新间隔（分钟）")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ddns"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," task"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --install"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 10"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -c"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/config/ddns.json")]),l(`
`),e("span",{class:"line"}),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"# 启用/禁用任务")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ddns"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," task"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --enable")]),l(`
`),e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"ddns"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," task"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --disable")])])]),e("div",{class:"line-numbers-wrapper","aria-hidden":"true"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br")])]),e("p",null,[l("详细配置指南请参考："),e("a",{href:"/config/cli#task-management-定时任务管理"},"命令行参数文档")]),e("h3",{id:"docker",tabindex:"-1"},[l("Docker "),e("a",{class:"header-anchor",href:"#docker","aria-label":"Permalink to “Docker”"},"​")]),e("p",null,"Docker 镜像在无额外参数的情况下，已默认启用每 5 分钟执行一次的定时任务")],-1),e("details",null,[e("summary",{markdown:"span"},"问题排查反馈"),e("ol",null,[e("li",null,"先确认排查是否是系统/网络环境问题"),e("li",null,[l("在 "),e("a",{href:"https://github.com/NewFuture/DDNS/issues",target:"_blank",rel:"noreferrer"},"issues"),l(" 中搜索是否有类似问题")]),e("li",null,[l("前两者均无法解决或者确定是 bug，"),e("a",{href:"https://github.com/NewFuture/DDNS/issues/new",target:"_blank",rel:"noreferrer"},"在此新建 issue"),e("ul",null,[e("li",null,[l("[ ] 开启 "),e("code",null,"--debug")]),e("li",null,[l("[ ] 附上这些内容 "),e("strong",null,"运行版本和方式"),l("、"),e("strong",null,"系统环境"),l("、"),e("strong",null,"出错日志"),l("、"),e("strong",null,"去掉 id/token"),l(" 的配置文件")]),e("li",null,"[ ] 源码运行注明使用的 python 环境")])])])],-1)])])}const m=i(h,[["render",d]]);export{b as __pageData,m as default};
