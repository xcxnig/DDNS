import{_ as i,c as a,o as n,aj as l}from"./chunks/framework.CFe3ezYR.js";const F=JSON.parse('{"title":"DDNS 命令行参数参考","description":"详细说明 DDNS 工具的命令行参数用法，包括基本用法、参数列表、配置文件等","frontmatter":{"title":"DDNS 命令行参数参考","description":"详细说明 DDNS 工具的命令行参数用法，包括基本用法、参数列表、配置文件等"},"headers":[],"relativePath":"config/cli.md","filePath":"config/cli.md","lastUpdated":1768325371000}'),e={name:"config/cli.md"};function t(p,s,h,k,d,r){return n(),a("div",null,[...s[0]||(s[0]=[l(`<p>本文档详细说明DDNS工具的命令行参数用法。命令行参数可用于覆盖配置文件和环境变量中的设置，具有<strong>最高优先级</strong>。</p><h2 id="基本用法" tabindex="-1">基本用法 <a class="header-anchor" href="#基本用法" aria-label="Permalink to “基本用法”">​</a></h2><p>可通过<code>-h</code> 查看参数列表</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ddns [选项]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或者使用Python：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># python3 -m ddns [选项]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -h</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="参数列表" tabindex="-1">参数列表 <a class="header-anchor" href="#参数列表" aria-label="Permalink to “参数列表”">​</a></h2><h3 id="列表参数说明" tabindex="-1">列表参数说明 <a class="header-anchor" href="#列表参数说明" aria-label="Permalink to “列表参数说明”">​</a></h3><p>对于支持多个值的列表类型参数（如 <code>--ipv4</code>、<code>--ipv6</code>、<code>--index4</code>、<code>--index6</code>、<code>--proxy</code> 等），在命令行中支持以下两种方式指定多个值：</p><h4 id="方式一-重复参数名-推荐" tabindex="-1">方式一：重复参数名（推荐） <a class="header-anchor" href="#方式一-重复参数名-推荐" aria-label="Permalink to “方式一：重复参数名（推荐）”">​</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;regex:192</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.168</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SYSTEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DIRECT</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="方式二-空格分隔" tabindex="-1">方式二：空格分隔 <a class="header-anchor" href="#方式二-空格分隔" aria-label="Permalink to “方式二：空格分隔”">​</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;regex:192</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.168</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SYSTEM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DIRECT</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="包含空格的参数值" tabindex="-1">包含空格的参数值 <a class="header-anchor" href="#包含空格的参数值" aria-label="Permalink to “包含空格的参数值”">​</a></h4><p>如果参数值本身包含空格，请使用引号包围：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;中国电信&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;中国联通&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;中国移动&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;url:http://ip.example.com/api?type=ipv4&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="不支持的用法" tabindex="-1">不支持的用法 <a class="header-anchor" href="#不支持的用法" aria-label="Permalink to “不支持的用法”">​</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ❌ 不支持逗号分隔</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;example.com,www.example.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4=example.com,www.example.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="参数详表" tabindex="-1">参数详表 <a class="header-anchor" href="#参数详表" aria-label="Permalink to “参数详表”">​</a></h3><table tabindex="0"><thead><tr><th>参数</th><th style="text-align:center;">类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>-h, --help</code></td><td style="text-align:center;">标志</td><td>显示帮助信息并退出</td><td><code>--help</code></td></tr><tr><td><code>-v, --version</code></td><td style="text-align:center;">标志</td><td>显示版本信息并退出</td><td><code>--version</code></td></tr><tr><td><code>-c, --config</code></td><td style="text-align:center;">字符串列表</td><td>指定配置文件路径，支持多个配置文件和远程HTTP(S) URL</td><td><code>--config config.json</code> <br> <code>--config config1.json --config config2.json</code> <br> <code>--config https://ddns.newfuture.cc/tests/config/debug.json</code></td></tr><tr><td><code>--new-config</code></td><td style="text-align:center;">标志/字符串</td><td>生成新的配置文件（可指定路径）</td><td><code>--new-config</code> <br> <code>--new-config=config.json</code></td></tr><tr><td><code>--debug</code></td><td style="text-align:center;">标志</td><td>开启调试模式</td><td><code>--debug</code></td></tr><tr><td><code>--dns</code></td><td style="text-align:center;">选择项</td><td><a href="./../providers/">DNS服务提供商</a>包括：<br>51dns, alidns, aliesa, callback, cloudflare,<br>debug, dnscom, dnspod_com, dnspod, edgeone, he,<br>huaweidns, noip, tencentcloud</td><td><code>--dns cloudflare</code></td></tr><tr><td><code>--endpoint</code></td><td style="text-align:center;">字符串</td><td>自定义API 端点 URL(更换服务节点)</td><td><code>--endpoint https://api.private.com</code></td></tr><tr><td><code>--id</code></td><td style="text-align:center;">字符串</td><td>API 访问 ID、邮箱或 Access ID</td><td><code>--id user@example.com</code></td></tr><tr><td><code>--token</code></td><td style="text-align:center;">字符串</td><td>API 授权令牌或密钥（Secret Key）</td><td><code>--token abcdef123456</code></td></tr><tr><td><code>--ipv4</code></td><td style="text-align:center;">字符串列表</td><td>IPv4 域名列表，支持重复参数或空格分隔</td><td><code>--ipv4 test.com 4.test.com</code> 或 <code>--ipv4 test.com --ipv4 4.test.com</code></td></tr><tr><td><code>--ipv6</code></td><td style="text-align:center;">字符串列表</td><td>IPv6 域名列表，支持重复参数或空格分隔</td><td><code>--ipv6 test.com</code> 或 <code>--ipv6 test.com ipv6.test.com</code></td></tr><tr><td><code>--index4</code></td><td style="text-align:center;">列表</td><td>IPv4 地址获取方式，支持：数字, default, public,<br>url:, regex:, cmd:, shell:</td><td><code>--index4 public 0</code> 或 <code>--index4 public --index4 &quot;regex:192\\\\.168\\\\..*&quot;</code></td></tr><tr><td><code>--index6</code></td><td style="text-align:center;">列表</td><td>IPv6 地址获取方式，支持：数字, default, public,<br>url:, regex:, cmd:, shell:</td><td><code>--index6 0 public</code> 或 <code>--index6 0 --index6 public</code></td></tr><tr><td><code>--ttl</code></td><td style="text-align:center;">整数</td><td>DNS 解析记录的 TTL 时间（秒）</td><td><code>--ttl 600</code></td></tr><tr><td><code>--line</code></td><td style="text-align:center;">字符串</td><td>解析线路(部分provider支持)，如 ISP线路</td><td><code>--line 电信</code> <br> <code>--line telecom</code></td></tr><tr><td><code>--proxy</code></td><td style="text-align:center;">字符串列表</td><td>HTTP 代理设置，支持：<code>http://host:port</code>、<code>DIRECT</code>(直连)、<code>SYSTEM</code>(系统代理)</td><td><code>--proxy SYSTEM DIRECT</code> 或 <code>--proxy http://127.0.0.1:1080 --proxy DIRECT</code></td></tr><tr><td><code>--cache</code></td><td style="text-align:center;">标志/字符串</td><td>是否启用缓存或自定义缓存路径</td><td><code>--cache</code> <br> <code>--cache=/path/to/cache</code></td></tr><tr><td><code>--no-cache</code></td><td style="text-align:center;">标志</td><td>禁用缓存（等效于 <code>--cache=false</code>）</td><td><code>--no-cache</code></td></tr><tr><td><code>--ssl</code></td><td style="text-align:center;">字符串</td><td>SSL 证书验证方式，支持：true, false, auto, 文件路径</td><td><code>--ssl false</code> <br> <code>--ssl=/path/to/ca-certs.crt</code></td></tr><tr><td><code>--no-ssl</code></td><td style="text-align:center;">标志</td><td>禁用 SSL 验证（等效于 <code>--ssl=false</code>）</td><td><code>--no-ssl</code></td></tr><tr><td><code>--log_file</code></td><td style="text-align:center;">字符串</td><td>日志文件路径，不指定则输出到控制台</td><td><code>--log_file=/var/log/ddns.log</code></td></tr><tr><td><code>--log_level</code></td><td style="text-align:center;">字符串</td><td>日志级别：DEBUG, INFO, WARNING, ERROR, CRITICAL</td><td><code>--log_level=ERROR</code></td></tr><tr><td><code>--log_format</code></td><td style="text-align:center;">字符串</td><td>日志格式字符串（<code>logging</code>模块格式）</td><td><code>--log_format=&quot;%(asctime)s:%(message)s&quot;</code></td></tr><tr><td><code>--log_datefmt</code></td><td style="text-align:center;">字符串</td><td>日志日期时间格式</td><td><code>--log_datefmt=&quot;%Y-%m-%d %H:%M:%S&quot;</code></td></tr></tbody></table><blockquote><p>这些参数仅支持命令行使用：<code>--debug</code>, <code>--no-cache</code>, <code>--no-ssl</code>, <code>--help</code>, <code>--version</code>。</p></blockquote><h4 id="task-子命令参数" tabindex="-1">Task 子命令参数 <a class="header-anchor" href="#task-子命令参数" aria-label="Permalink to “Task 子命令参数”">​</a></h4><table tabindex="0"><thead><tr><th>参数</th><th style="text-align:center;">类型</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>--install</code>, <code>-i</code></td><td style="text-align:center;">整数（可选）</td><td>安装定时任务，可指定更新间隔分钟数（默认5分钟）。<strong>自动覆盖已有任务</strong></td><td><code>--install</code>、<code>-i 10</code></td></tr><tr><td><code>--uninstall</code></td><td style="text-align:center;">标志</td><td>卸载已安装的定时任务</td><td><code>--uninstall</code></td></tr><tr><td><code>--status</code></td><td style="text-align:center;">标志</td><td>显示定时任务安装状态和运行信息</td><td><code>--status</code></td></tr><tr><td><code>--enable</code></td><td style="text-align:center;">标志</td><td>启用已安装的定时任务</td><td><code>--enable</code></td></tr><tr><td><code>--disable</code></td><td style="text-align:center;">标志</td><td>禁用已安装的定时任务</td><td><code>--disable</code></td></tr><tr><td><code>--scheduler</code></td><td style="text-align:center;">选择项</td><td>指定调度器类型，支持：auto（自动选择）、systemd、cron、launchd、schtasks</td><td><code>--scheduler systemd</code>、<code>--scheduler auto</code></td></tr></tbody></table><blockquote><p><strong>重要说明</strong>:</p><ul><li><code>--install</code> 命令<strong>自动覆盖安装</strong>，无需检查是否已安装。如果系统中已有 DDNS 定时任务，会自动替换为新配置。</li><li>这种设计简化了任务管理流程，避免手动卸载的繁琐操作。</li><li><code>task</code> 子命令支持所有主要 DDNS 配置参数（如 <code>--dns</code>, <code>--id</code>, <code>--token</code>, <code>--ipv4</code>, <code>--ipv6</code> 等），这些参数将被保存并传递给定时任务执行时使用。</li></ul></blockquote><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to “配置文件”">​</a></h2><h3 id="c-file" tabindex="-1"><code>-c FILE</code> <a class="header-anchor" href="#c-file" aria-label="Permalink to “-c FILE”">​</a></h3><p><code>-c</code>是<code>--config</code>的简写形式，用于指定配置文件路径。可以使用多个<code>-c</code>参数来加载多个配置文件。同时支持远程HTTP(S) URL。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod.json</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 远程配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://ddns.newfuture.cc/tests/config/debug.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 带认证的远程配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://user:password@config.example.com/ddns.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 混合本地和远程配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local-config.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://remote.example.com/config.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="dns服务配置参数" tabindex="-1">DNS服务配置参数 <a class="header-anchor" href="#dns服务配置参数" aria-label="Permalink to “DNS服务配置参数”">​</a></h2><h3 id="dns-dns-provider" tabindex="-1"><code>--dns DNS_PROVIDER</code> <a class="header-anchor" href="#dns-dns-provider" aria-label="Permalink to “--dns DNS_PROVIDER”">​</a></h3><p><a href="./../providers/">DNS服务提供商</a>详细列表。</p><h3 id="id-id" tabindex="-1"><code>--id ID</code> <a class="header-anchor" href="#id-id" aria-label="Permalink to “--id ID”">​</a></h3><p>API访问ID或用户标识。</p><ul><li><strong>必需</strong>: 是（部分DNS服务商可选）</li><li><strong>说明</strong>: <ul><li>Cloudflare: 填写邮箱地址（使用Token时可留空）</li><li>HE.net: 可留空</li><li>华为云: 填写Access Key ID (AK)</li><li>Callback: 填写回调URL地址（支持变量替换）</li><li>其他服务商: 根据各自要求填写ID</li></ul></li></ul><h3 id="token-token" tabindex="-1"><code>--token TOKEN</code> <a class="header-anchor" href="#token-token" aria-label="Permalink to “--token TOKEN”">​</a></h3><p>API授权令牌或密钥。</p><ul><li><strong>必需</strong>: 是</li><li><strong>说明</strong>: <ul><li>大部分平台: API密钥或Secret Key</li><li>Callback: POST请求参数（JSON字符串），为空时使用GET请求</li><li>请妥善保管敏感信息</li></ul></li></ul><p><strong>Callback配置示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GET方式回调</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> callback</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://api.example.com/ddns?domain=__DOMAIN__&amp;ip=__IP__&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># POST方式回调</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> callback</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://api.example.com/ddns&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;api_key&quot;: &quot;your_key&quot;, &quot;domain&quot;: &quot;__DOMAIN__&quot;}&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>详细配置请参考：<a href="./../providers/callback">Callback Provider 配置文档</a></p><h2 id="域名配置参数" tabindex="-1">域名配置参数 <a class="header-anchor" href="#域名配置参数" aria-label="Permalink to “域名配置参数”">​</a></h2><h3 id="ipv4-domain" tabindex="-1"><code>--ipv4 [DOMAIN...]</code> <a class="header-anchor" href="#ipv4-domain" aria-label="Permalink to “--ipv4 [DOMAIN...]”">​</a></h3><p>需要更新IPv4记录的域名列表。</p><ul><li><strong>默认值</strong>: <code>[]</code>（不更新IPv4地址）</li><li><strong>示例</strong>: <ul><li><code>--ipv4 example.com</code> (单个域名)</li><li><code>--ipv4 example.com --ipv4 subdomain.example.com</code> (多个域名)</li></ul></li></ul><h3 id="ipv6-domain" tabindex="-1"><code>--ipv6 [DOMAIN...]</code> <a class="header-anchor" href="#ipv6-domain" aria-label="Permalink to “--ipv6 [DOMAIN...]”">​</a></h3><p>需要更新IPv6记录的域名列表。</p><ul><li><strong>默认值</strong>: <code>[]</code>（不更新IPv6地址）</li><li><strong>示例</strong>: <ul><li><code>--ipv6 example.com</code> (单个域名)</li><li><code>--ipv6 example.com --ipv6 ipv6.example.com</code> (多个域名)</li></ul></li></ul><h2 id="ip获取方式参数" tabindex="-1">IP获取方式参数 <a class="header-anchor" href="#ip获取方式参数" aria-label="Permalink to “IP获取方式参数”">​</a></h2><h3 id="index4-rule" tabindex="-1"><code>--index4 [Rule...]</code> <a class="header-anchor" href="#index4-rule" aria-label="Permalink to “--index4 [Rule...]”">​</a></h3><p>IPv4地址获取方式。</p><ul><li><strong>默认值</strong>: <code>default</code></li><li><strong>可选值</strong>: <ul><li>数字（<code>0</code>，<code>1</code>，<code>2</code>...）: 第N个网卡IP</li><li><code>default</code>: 系统访问外网默认IP</li><li><code>public</code>: 使用公网IP（通过多个API自动查询，支持失败重试）</li><li><code>url:{URL}</code>: 从指定URL获取IP</li><li><code>regex:{PATTERN}</code>: 使用正则表达式匹配本地网络配置中的IP</li><li><code>cmd:{COMMAND}</code>: 执行指定命令并使用其输出作为IP</li><li><code>shell:{COMMAND}</code>: 使用系统shell运行命令并使用其输出作为IP</li></ul></li><li><strong>示例</strong>: <ul><li><code>--index4 0</code> (第一个网卡)</li><li><code>--index4 public</code> (公网IP)</li><li><code>--index4 &quot;url:http://ip.sb&quot;</code> (从URL获取)</li><li><code>--index4 &quot;regex:192\\\\.168\\\\.*&quot;</code> (匹配192.168开头的IP)</li><li><code>--index4 public --index4 0</code> (先尝试获取公网IP，失败则使用第一个网卡)</li></ul></li></ul><h3 id="index6-rule" tabindex="-1"><code>--index6 [Rule...]</code> <a class="header-anchor" href="#index6-rule" aria-label="Permalink to “--index6 [Rule...]”">​</a></h3><p>IPv6地址获取方式，用法同<code>--index4</code>。</p><h2 id="网络配置参数" tabindex="-1">网络配置参数 <a class="header-anchor" href="#网络配置参数" aria-label="Permalink to “网络配置参数”">​</a></h2><h3 id="ttl-ttl" tabindex="-1"><code>--ttl TTL</code> <a class="header-anchor" href="#ttl-ttl" aria-label="Permalink to “--ttl TTL”">​</a></h3><p>DNS解析TTL时间（秒）。</p><ul><li><strong>默认值</strong>: <code>null</code>（使用DNS服务商默认设置）</li><li><strong>示例</strong>: <ul><li><code>--ttl 600</code> (10分钟)</li><li><code>--ttl 3600</code> (1小时)</li></ul></li></ul><h3 id="proxy-proxy" tabindex="-1"><code>--proxy [PROXY...]</code> <a class="header-anchor" href="#proxy-proxy" aria-label="Permalink to “--proxy [PROXY...]”">​</a></h3><p>HTTP代理设置，支持多代理轮换。代理类型包括：</p><ul><li><p><strong>具体代理</strong>: <code>http://host:port</code> - 使用指定代理服务器</p></li><li><p><strong>直连</strong>: <code>DIRECT</code> - 强制直连，忽略系统代理设置</p></li><li><p><strong>系统代理</strong>: <code>SYSTEM</code> - 使用系统默认代理设置</p></li><li><p><strong>默认值</strong>: 无（使用系统默认代理设置）</p></li><li><p><strong>示例</strong>:</p><ul><li><code>--proxy http://127.0.0.1:1080</code> (单个代理)</li><li><code>--proxy SYSTEM</code> (使用系统代理设置)</li><li><code>--proxy DIRECT</code> (强制直连)</li><li><code>--proxy http://127.0.0.1:1080 --proxy DIRECT</code> (先尝试代理，失败后直连)</li><li><code>--proxy SYSTEM --proxy http://backup:8080 --proxy DIRECT</code> (系统代理→备用代理→直连)</li></ul></li></ul><h2 id="系统配置参数" tabindex="-1">系统配置参数 <a class="header-anchor" href="#系统配置参数" aria-label="Permalink to “系统配置参数”">​</a></h2><h3 id="cache-true-false-path" tabindex="-1"><code>--cache {true|false|PATH}</code> <a class="header-anchor" href="#cache-true-false-path" aria-label="Permalink to “--cache {true|false|PATH}”">​</a></h3><p>启用缓存以减少API请求。</p><ul><li><strong>默认值</strong>: <code>true</code></li><li><strong>可选值</strong>: <ul><li><code>true</code>: 启用缓存，使用默认路径</li><li><code>false</code>: 禁用缓存</li><li>文件路径: 自定义缓存文件位置</li></ul></li><li><strong>示例</strong>: <ul><li><code>--cache</code> (启用默认缓存)</li><li><code>--cache=false</code> (禁用缓存)</li><li><code>--cache=/path/to/ddns.cache</code> (自定义缓存路径)</li></ul></li></ul><h3 id="ssl-true-false-auto-path" tabindex="-1"><code>--ssl {true|false|auto|PATH}</code> <a class="header-anchor" href="#ssl-true-false-auto-path" aria-label="Permalink to “--ssl {true|false|auto|PATH}”">​</a></h3><p>SSL证书验证方式，控制HTTPS连接的证书验证行为。</p><ul><li><strong>默认值</strong>: <code>auto</code></li><li><strong>可选值</strong>: <ul><li><code>true</code>: 强制验证SSL证书（最安全）</li><li><code>false</code>: 禁用SSL证书验证（最不安全）</li><li><code>auto</code>: 优先验证，SSL证书错误时自动降级（不安全）</li><li>文件路径: 使用指定路径的自定义CA证书（最安全）</li></ul></li><li><strong>示例</strong>: <ul><li><code>--ssl true</code> (强制验证)</li><li><code>--ssl false</code> (禁用验证)</li><li><code>--ssl auto</code> (自动降级)</li><li><code>--ssl /etc/ssl/certs/ca-certificates.crt</code> (自定义CA证书)</li></ul></li></ul><h3 id="debug" tabindex="-1"><code>--debug</code> <a class="header-anchor" href="#debug" aria-label="Permalink to “--debug”">​</a></h3><p>启用调试模式（等同于设置<code>--log_level=DEBUG</code>）。</p><ul><li><strong>说明</strong>: 此参数仅作为命令行参数有效，配置文件中的同名设置无效</li><li><strong>示例</strong>: <code>--debug</code></li></ul><h2 id="日志配置参数" tabindex="-1">日志配置参数 <a class="header-anchor" href="#日志配置参数" aria-label="Permalink to “日志配置参数”">​</a></h2><h3 id="log-level-critical-fatal-error-warn-warning-info-debug-notset" tabindex="-1"><code>--log_level {CRITICAL|FATAL|ERROR|WARN|WARNING|INFO|DEBUG|NOTSET}</code> <a class="header-anchor" href="#log-level-critical-fatal-error-warn-warning-info-debug-notset" aria-label="Permalink to “--log_level {CRITICAL|FATAL|ERROR|WARN|WARNING|INFO|DEBUG|NOTSET}”">​</a></h3><p>设置日志级别。</p><ul><li><strong>默认值</strong>: <code>INFO</code></li><li><strong>示例</strong>: <ul><li><code>--log_level=DEBUG</code> (调试模式)</li><li><code>--log_level=ERROR</code> (仅显示错误)</li></ul></li></ul><h3 id="log-file-logfile" tabindex="-1"><code>--log_file LOGFILE</code> <a class="header-anchor" href="#log-file-logfile" aria-label="Permalink to “--log_file LOGFILE”">​</a></h3><p>设置日志文件路径。</p><ul><li><strong>默认值</strong>: 无（输出到控制台）</li><li><strong>示例</strong>: <ul><li><code>--log_file=/var/log/ddns.log</code></li><li><code>--log_file=./ddns.log</code></li></ul></li></ul><h3 id="log-datefmt-format" tabindex="-1"><code>--log_datefmt FORMAT</code> <a class="header-anchor" href="#log-datefmt-format" aria-label="Permalink to “--log_datefmt FORMAT”">​</a></h3><p>设置日期时间格式字符串（参考Python time.strftime()格式）。</p><ul><li><strong>默认值</strong>: <code>%Y-%m-%dT%H:%M:%S</code></li><li><strong>示例</strong>: <ul><li><code>--log_datefmt=&quot;%Y-%m-%d %H:%M:%S&quot;</code></li><li><code>--log_datefmt=&quot;%m-%d %H:%M:%S&quot;</code></li></ul></li></ul><h2 id="task-management-定时任务管理" tabindex="-1">Task Management (定时任务管理) <a class="header-anchor" href="#task-management-定时任务管理" aria-label="Permalink to “Task Management (定时任务管理)”">​</a></h2><p>DDNS 支持通过 <code>task</code> 子命令管理定时任务，可自动根据系统选择合适的调度器安装定时更新任务。</p><h3 id="重要特性" tabindex="-1">重要特性 <a class="header-anchor" href="#重要特性" aria-label="Permalink to “重要特性”">​</a></h3><ul><li><strong>智能安装</strong>: <code>--install</code> 命令自动覆盖已有任务，简化安装流程</li><li><strong>跨平台支持</strong>: 自动检测系统并选择最佳调度器</li><li><strong>完整配置</strong>: 支持所有 DDNS 配置参数</li></ul><h3 id="task-子命令用法" tabindex="-1">Task 子命令用法 <a class="header-anchor" href="#task-子命令用法" aria-label="Permalink to “Task 子命令用法”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看帮助</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --help</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查任务状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自动安装（如果未安装）或显示状态（如果已安装）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装定时任务（默认5分钟间隔）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装定时任务并指定间隔时间（分钟）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定调度器类型安装任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auto</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用已安装的定时任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用已安装的定时任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 卸载已安装的定时任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --uninstall</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="支持的调度器" tabindex="-1">支持的调度器 <a class="header-anchor" href="#支持的调度器" aria-label="Permalink to “支持的调度器”">​</a></h3><p>DDNS 会自动检测系统并选择最合适的调度器：</p><ul><li><strong>Linux</strong>: systemd (优先) 或 cron</li><li><strong>macOS</strong>: launchd (优先) 或 cron</li><li><strong>Windows</strong>: schtasks</li></ul><h3 id="调度器选择说明" tabindex="-1">调度器选择说明 <a class="header-anchor" href="#调度器选择说明" aria-label="Permalink to “调度器选择说明”">​</a></h3><table tabindex="0"><thead><tr><th>调度器</th><th>适用系统</th><th>描述</th><th>推荐度</th></tr></thead><tbody><tr><td><code>auto</code></td><td>所有系统</td><td>自动检测系统并选择最佳调度器</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td><code>systemd</code></td><td>Linux</td><td>现代 Linux 系统的标准定时器，功能完整</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td><code>cron</code></td><td>Unix-like</td><td>传统 Unix 定时任务，兼容性好</td><td>⭐⭐⭐⭐</td></tr><tr><td><code>launchd</code></td><td>macOS</td><td>macOS 系统原生任务调度器</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td><code>schtasks</code></td><td>Windows</td><td>Windows 任务计划程序</td><td>⭐⭐⭐⭐⭐</td></tr></tbody></table><h3 id="参数说明" tabindex="-1">参数说明 <a class="header-anchor" href="#参数说明" aria-label="Permalink to “参数说明”">​</a></h3><table tabindex="0"><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><code>--status</code></td><td>显示定时任务安装状态和运行信息</td></tr><tr><td><code>--install [分钟]</code>, <code>-i [分钟]</code></td><td>安装定时任务，可指定更新间隔（默认5分钟）。<strong>自动覆盖已有任务</strong></td></tr><tr><td><code>--uninstall</code></td><td>卸载已安装的定时任务</td></tr><tr><td><code>--enable</code></td><td>启用已安装的定时任务</td></tr><tr><td><code>--disable</code></td><td>禁用已安装的定时任务</td></tr><tr><td><code>--scheduler</code></td><td>指定调度器类型，支持：auto、systemd、cron、launchd、schtasks</td></tr></tbody></table><blockquote><p><strong>安装行为说明</strong>:</p><ul><li><code>--install</code> 命令直接执行安装，无需事先检查或卸载</li><li>自动替换系统中已有的 DDNS 定时任务</li><li>简化任务管理流程，一键完成任务更新</li></ul></blockquote><blockquote><p><strong>配置参数支持</strong>: <code>task</code> 子命令支持所有 DDNS 配置参数，这些参数将被传递给定时任务执行时使用。</p></blockquote><h3 id="权限要求" tabindex="-1">权限要求 <a class="header-anchor" href="#权限要求" aria-label="Permalink to “权限要求”">​</a></h3><p>不同调度器需要不同的权限：</p><ul><li><strong>systemd</strong>: 需要 root 权限 (<code>sudo</code>)</li><li><strong>cron</strong>: 普通用户权限即可</li><li><strong>launchd</strong>: 普通用户权限即可</li><li><strong>schtasks</strong>: 需要管理员权限</li></ul><h3 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to “使用示例”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 检查当前状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装 10 分钟间隔的定时任务，使用指定配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ddns/config.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装定时任务并直接指定 DDNS 参数（无需配置文件）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装定时任务，包含高级配置参数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12345</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ttl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 600</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://proxy:8080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          --log_file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/ddns.log</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --log_level</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> INFO</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定调度器类型安装任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 强制使用 cron 调度器（适用于没有 systemd 的 Linux 系统）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 macOS 上强制使用 launchd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launchd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12345</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> secret</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 Windows 上使用 schtasks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> schtasks</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在 Linux 上使用 sudo 安装 systemd 定时器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ddns/config.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新任务配置（自动覆盖）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NEW_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用已安装的任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用任务（不删除，仅停止执行）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 完全卸载定时任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --uninstall</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="与配置文件结合使用" tabindex="-1">与配置文件结合使用 <a class="header-anchor" href="#与配置文件结合使用" aria-label="Permalink to “与配置文件结合使用”">​</a></h3><p><code>task</code> 子命令可以与配置文件完美结合，支持多种配置方式：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用本地配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用多个配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用远程配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://config.example.com/ddns.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 配置文件 + 命令行参数覆盖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ttl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定调度器类型 + 配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用远程配置文件 + 指定调度器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://config.example.com/ddns.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="调度器选择指南" tabindex="-1">调度器选择指南 <a class="header-anchor" href="#调度器选择指南" aria-label="Permalink to “调度器选择指南”">​</a></h3><p>根据不同系统和需求选择合适的调度器：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自动选择（推荐，让系统选择最佳调度器）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auto</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux 系统选择</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 优先选择，功能完整</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 备用选择，兼容性好</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS 系统选择</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launchd</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 优先选择，系统原生</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 备用选择，兼容性好</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Windows 系统选择</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> schtasks</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 唯一选择，Windows 任务计划</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="调试安装问题" tabindex="-1">调试安装问题 <a class="header-anchor" href="#调试安装问题" aria-label="Permalink to “调试安装问题”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用调试模式查看详细安装过程</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看任务状态和配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看指定调度器的状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="常用命令示例" tabindex="-1">常用命令示例 <a class="header-anchor" href="#常用命令示例" aria-label="Permalink to “常用命令示例”">​</a></h2><h3 id="基本使用" tabindex="-1">基本使用 <a class="header-anchor" href="#基本使用" aria-label="Permalink to “基本使用”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用默认配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用指定配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/config.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用多个配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用远程配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://ddns.newfuture.cc/tests/config/debug.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用带代理的远程配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://config.example.com/ddns.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://proxy:8080</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="计划任务管理" tabindex="-1">计划任务管理 <a class="header-anchor" href="#计划任务管理" aria-label="Permalink to “计划任务管理”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装计划任务，每5分钟执行一次（自动选择调度器）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定调度器类型安装任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> launchd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看任务状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看指定调度器的状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --status</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用/禁用任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --disable</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 卸载任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --uninstall</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用自定义配置文件创建任务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/custom.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定调度器 + 配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cron</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /path/to/custom.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新任务配置（自动覆盖）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NEW_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新任务配置并更改调度器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> task</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --scheduler</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> systemd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NEW_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 生成新的配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --new-config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="直接命令行配置" tabindex="-1">直接命令行配置 <a class="header-anchor" href="#直接命令行配置" aria-label="Permalink to “直接命令行配置”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 最简单的配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12345</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mytokenkey</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用调试模式</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名配置（空格分隔）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名配置（重复参数）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="高级配置示例" tabindex="-1">高级配置示例 <a class="header-anchor" href="#高级配置示例" aria-label="Permalink to “高级配置示例”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 完整配置示例（包含代理、TTL、IP获取方式等） - 使用空格分隔</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;regex:2001:.*&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ttl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://127.0.0.1:1080</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DIRECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --cache=/var/cache/ddns.cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --log_level=INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --log_file=/var/log/ddns.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 完整配置示例 - 使用重复参数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudflare</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user@example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API_TOKEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> www.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index6</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;regex:2001:.*&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ttl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://127.0.0.1:1080</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DIRECT</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --cache=/var/cache/ddns.cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --log_level=INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --log_file=/var/log/ddns.log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用线路解析</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dnspod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12345</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mytokenkey</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> telecom.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 电信</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 使用远程配置文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://ddns.newfuture.cc/tests/config/debug.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --debug</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 远程配置文件带代理</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://config.example.com/ddns.json</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://proxy.company.com:8080</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用缓存和SSL验证</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dns</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alidns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ACCESS_KEY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SECRET_KEY</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --no-ssl</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to “注意事项”">​</a></h2><h3 id="优先级" tabindex="-1">优先级 <a class="header-anchor" href="#优先级" aria-label="Permalink to “优先级”">​</a></h3><p><strong>命令行参数优先级</strong>: 命令行参数具有最高优先级，会覆盖配置文件和环境变量中的设置。</p><h3 id="引号" tabindex="-1">引号 <a class="header-anchor" href="#引号" aria-label="Permalink to “引号”">​</a></h3><p><strong>引号使用</strong>: 对于需要空格或特殊字符的参数值，请使用引号包围，例如：<code>--log_format=&quot;%(asctime)s: %(message)s&quot;</code>。</p><h3 id="列表参数" tabindex="-1">列表参数 <a class="header-anchor" href="#列表参数" aria-label="Permalink to “列表参数”">​</a></h3><p><strong>列表参数配置</strong>: 对于多值参数（如<code>--ipv4</code>、<code>--ipv6</code>、<code>--index4</code>、<code>--index6</code>、<code>--proxy</code>等），支持两种指定方式：</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ✅ 方式一：重复参数名（推荐）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub.example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4=0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;regex:192</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.168</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ✅ 方式二：空格分隔</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sub.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> api.example.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --index4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;regex:192</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.168</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --ipv4=example.com,sub.example.com</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 不支持等号加逗号</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="调试模式" tabindex="-1">调试模式 <a class="header-anchor" href="#调试模式" aria-label="Permalink to “调试模式”">​</a></h3><p><strong>调试模式</strong>: <code>--debug</code>参数仅在命令行中有效，配置文件中的debug设置将被忽略。</p><h3 id="正则表达式" tabindex="-1">正则表达式 <a class="header-anchor" href="#正则表达式" aria-label="Permalink to “正则表达式”">​</a></h3><p><strong>正则表达式</strong>: 使用正则表达式时需要适当转义特殊字符，建议使用引号包围，例如：<code>--index4 &quot;regex:192\\\\.168\\\\..*&quot;</code>。</p>`,129)])])}const o=i(e,[["render",t]]);export{F as __pageData,o as default};
