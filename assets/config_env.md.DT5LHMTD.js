import{_ as i,c as a,o as n,aj as l}from"./chunks/framework.CFe3ezYR.js";const c=JSON.parse('{"title":"DDNS 环境变量配置文档","description":"","frontmatter":{},"headers":[],"relativePath":"config/env.md","filePath":"config/env.md","lastUpdated":1768296921000}'),e={name:"config/env.md"};function t(p,s,h,r,k,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="ddns-环境变量配置文档" tabindex="-1">DDNS 环境变量配置文档 <a class="header-anchor" href="#ddns-环境变量配置文档" aria-label="Permalink to “DDNS 环境变量配置文档”">​</a></h1><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to “概述”">​</a></h2><p>DDNS 支持通过环境变量进行配置，环境变量的优先级为：<strong><a href="./cli">命令行参数</a> &gt; <a href="./json">配置文件</a> &gt; 环境变量</strong></p><p>所有环境变量都以 <code>DDNS_</code> 为前缀，后跟参数名（推荐全大写）,对象和属性分隔符用<code>_</code>分割。</p><blockquote><p>export DDNS_XXX=&quot;xxx&quot; 命令作用于当前主机 docker run -e DDNS_XXX=&quot;xxx&quot; 命令作用于容器内</p></blockquote><h2 id="环境变量完整参数列表" tabindex="-1">环境变量完整参数列表 <a class="header-anchor" href="#环境变量完整参数列表" aria-label="Permalink to “环境变量完整参数列表”">​</a></h2><table tabindex="0"><thead><tr><th>环境变量</th><th>参数格式</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td><code>DDNS_CONFIG</code></td><td>文件路径，支持逗号或分号分隔多个路径，支持远程HTTP(S) URL</td><td>指定配置文件路径，支持多个配置文件和远程配置</td><td><code>DDNS_CONFIG=&quot;config.json&quot;</code> 或 <code>DDNS_CONFIG=&quot;cloudflare.json,dnspod.json&quot;</code> <br> <code>DDNS_CONFIG=&quot;https://ddns.newfuture.cc/tests/config/debug.json&quot;</code></td></tr><tr><td><code>DDNS_DNS</code></td><td><code>51dns</code>、<code>alidns</code>、<code>aliesa</code>、<code>callback</code>、<code>cloudflare</code>、<code>debug</code>、<code>dnscom</code>、<code>dnspod_com</code>、<code>dnspod</code>、<code>edgeone</code>、<code>he</code>、<code>huaweidns</code>、<code>noip</code>、<code>tencentcloud</code></td><td><a href="./../providers/">DNS 服务商</a></td><td><code>DDNS_DNS=cloudflare</code></td></tr><tr><td><code>DDNS_ID</code></td><td>依 DNS 服务商而定</td><td>API 账号 或 ID</td><td><code>DDNS_ID=&quot;user@example.com&quot;</code></td></tr><tr><td><code>DDNS_TOKEN</code></td><td>依 DNS 服务商而定</td><td>API 授权令牌或 Secret</td><td><code>DDNS_TOKEN=&quot;abcdef123456&quot;</code></td></tr><tr><td><code>DDNS_ENDPOINT</code></td><td>URL（http 或 https 协议）</td><td>自定义 API 地址</td><td><code>DDNS_ENDPOINT=https://api.dns.cn</code></td></tr><tr><td><code>DDNS_IPV4</code></td><td>域名，数组或逗号分隔字符串</td><td>IPv4 域名列表</td><td><code>DDNS_IPV4=&#39;[&quot;t.com&quot;,&quot;4.t.com&quot;]&#39;</code></td></tr><tr><td><code>DDNS_IPV6</code></td><td>域名，数组或逗号分隔字符串</td><td>IPv6 域名列表</td><td><code>DDNS_IPV6=t.com,6.t.com</code></td></tr><tr><td><code>DDNS_INDEX4</code></td><td>数字、default、public、url:、regex:、cmd:、shell:，可为数组</td><td>IPv4 获取方式</td><td><code>DDNS_INDEX4=&quot;[0,&#39;regex:192.168.*&#39;]&quot;</code></td></tr><tr><td><code>DDNS_INDEX6</code></td><td>数字、default、public、url:、regex:、cmd:、shell:，可为数组</td><td>IPv6 获取方式</td><td><code>DDNS_INDEX6=public</code></td></tr><tr><td><code>DDNS_TTL</code></td><td>整数（单位：秒），依服务商而定</td><td>设置 DNS TTL</td><td><code>DDNS_TTL=600</code></td></tr><tr><td><code>DDNS_LINE</code></td><td>依服务商而定，如：电信、移动</td><td>DNS 解析线路</td><td><code>DDNS_LINE=电信</code></td></tr><tr><td><code>DDNS_PROXY</code></td><td><code>http://host:port</code> 或 DIRECT，支持多代理数组或分号分隔</td><td>HTTP 代理设置</td><td><code>DDNS_PROXY=&quot;http://127.0.0.1:1080;DIRECT&quot;</code></td></tr><tr><td><code>DDNS_CACHE</code></td><td>true、false 或文件路径</td><td>启用缓存或指定缓存文件路径</td><td><code>DDNS_CACHE=&quot;/tmp/cache&quot;</code></td></tr><tr><td><code>DDNS_SSL</code></td><td>true、false、auto 或文件路径</td><td>设置 SSL 验证方式或指定证书路径</td><td><code>DDNS_SSL=false</code><br><code>DDNS_SSL=/path/ca.crt</code></td></tr><tr><td><code>DDNS_CRON</code></td><td>Cron 表达式格式字符串（仅 Docker 环境有效）</td><td>Docker 容器内定时任务周期</td><td><code>DDNS_CRON=&quot;*/10 * * * *&quot;</code></td></tr><tr><td><code>DDNS_LOG_LEVEL</code></td><td>DEBUG、INFO、WARNING、ERROR、CRITICAL</td><td>设置日志等级</td><td><code>DDNS_LOG_LEVEL=&quot;DEBUG&quot;</code></td></tr><tr><td><code>DDNS_LOG_FILE</code></td><td>文件路径</td><td>设置日志输出文件（默认输出到终端）</td><td><code>DDNS_LOG_FILE=&quot;/tmp/ddns.log&quot;</code></td></tr><tr><td><code>DDNS_LOG_FORMAT</code></td><td>Python logging 格式模板</td><td>设置日志格式</td><td><code>DDNS_LOG_FORMAT=&quot;%(message)s&quot;</code></td></tr><tr><td><code>DDNS_LOG_DATEFMT</code></td><td>日期时间格式字符串</td><td>设置日志时间格式</td><td><code>DDNS_LOG_DATEFMT=&quot;%m-%d %H:%M&quot;</code></td></tr></tbody></table><blockquote><p><strong>注意</strong>: 数组确认字符串引号，可打印出来查看</p></blockquote><h2 id="基础配置参数" tabindex="-1">基础配置参数 <a class="header-anchor" href="#基础配置参数" aria-label="Permalink to “基础配置参数”">​</a></h2><h3 id="配置文件路径" tabindex="-1">配置文件路径 <a class="header-anchor" href="#配置文件路径" aria-label="Permalink to “配置文件路径”">​</a></h3><h4 id="ddns-config" tabindex="-1">DDNS_CONFIG <a class="header-anchor" href="#ddns-config" aria-label="Permalink to “DDNS_CONFIG”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: 按默认路径搜索（<code>config.json</code>、<code>~/.ddns/config.json</code>等）</p></li><li><p><strong>格式</strong>: 单个文件路径、多个文件路径（用逗号或分号分隔）、或远程HTTP(S) URL</p></li><li><p><strong>说明</strong>: 指定配置文件路径，支持多个配置文件同时使用和远程配置文件</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单个配置文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/ddns.json&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 远程配置文件</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://ddns.newfuture.cc/tests/config/debug.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://user:password@config.example.com/ddns.json&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多个配置文件径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/etc/ddns/cloudflare.json,./dnspod.json&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 混合本地和远程配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;local.json,https://remote.example.com/config.json&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul><h3 id="dns-服务商" tabindex="-1">DNS 服务商 <a class="header-anchor" href="#dns-服务商" aria-label="Permalink to “DNS 服务商”">​</a></h3><h4 id="ddns-dns" tabindex="-1">DDNS_DNS <a class="header-anchor" href="#ddns-dns" aria-label="Permalink to “DDNS_DNS”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>dnspod</code></p></li><li><p><strong>可选值</strong>: <code>51dns</code>, <code>alidns</code>, <code>aliesa</code>, <code>callback</code>, <code>cloudflare</code>, <code>debug</code>, <code>dnscom</code>, <code>dnspod</code>, <code>dnspod_com</code>, <code>edgeone</code>, <code>he</code>, <code>huaweidns</code>, <code>noip</code>, <code>tencentcloud</code></p></li><li><p><strong>说明</strong>: DNS 服务提供商</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alidns&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 阿里云 DNS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;aliesa&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 阿里云企业版 DNS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cloudflare&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # CloudFlare</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dnspod&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # DNSPod 国内版</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dnspod_com&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # DNSPod 国际版</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dnscom&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # DNS.COM</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;51dns&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 51DNS (DNS.COM别名)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;he&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # HE.net</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;huaweidns&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 华为云 DNS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;noip&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # NoIP</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tencentcloud&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 腾讯云 DNS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;edgeone&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       # 腾讯云 EdgeOne</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;callback&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # 自定义回调</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;debug&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # 调试模式</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul><h4 id="ddns-endpoint" tabindex="-1">DDNS_ENDPOINT <a class="header-anchor" href="#ddns-endpoint" aria-label="Permalink to “DDNS_ENDPOINT”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: 无（使用各DNS服务商的默认API端点）</p></li><li><p><strong>说明</strong>: API端点URL，用于自定义或私有部署的API地址</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 自定义API端点</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://private.dns.com&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 私有部署的DNS API</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                             # 使用默认端点</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h2 id="域名配置" tabindex="-1">域名配置 <a class="header-anchor" href="#域名配置" aria-label="Permalink to “域名配置”">​</a></h2><h3 id="ipv4-域名列表" tabindex="-1">IPv4 域名列表 <a class="header-anchor" href="#ipv4-域名列表" aria-label="Permalink to “IPv4 域名列表”">​</a></h3><h4 id="ddns-ipv4" tabindex="-1">DDNS_IPV4 <a class="header-anchor" href="#ddns-ipv4" aria-label="Permalink to “DDNS_IPV4”">​</a></h4><ul><li><p><strong>类型</strong>: 数组（支持 JSON/python 格式）</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>[]</code></p></li><li><p><strong>说明</strong>: 需要更新 IPv4 记录的域名列表</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># JSON 数组格式（推荐）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_IPV4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;example.com&quot;, &quot;sub.example.com&quot;]&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单个域名</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_IPV4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;example.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用 IPv4 更新</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_IPV4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[]&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h2 id="ip-获取方式" tabindex="-1">IP 获取方式 <a class="header-anchor" href="#ip-获取方式" aria-label="Permalink to “IP 获取方式”">​</a></h2><h3 id="ipv4-获取方式" tabindex="-1">IPv4 获取方式 <a class="header-anchor" href="#ipv4-获取方式" aria-label="Permalink to “IPv4 获取方式”">​</a></h3><h4 id="ddns-index4" tabindex="-1">DDNS_INDEX4 <a class="header-anchor" href="#ddns-index4" aria-label="Permalink to “DDNS_INDEX4”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串或数组</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>[&quot;default&quot;]</code> (使用系统默认外网IP)</p></li><li><p><strong>说明</strong>: IPv4 地址获取方式。支持逗号<code>,</code>或分号<code>;</code>分隔的字符串格式</p></li><li><p><strong>特殊说明</strong>: 当值包含 <code>regex:</code>、<code>cmd:</code> 或 <code>shell:</code> 前缀时，不支持分隔符分割，整个字符串作为单一配置项</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 默认方式（系统默认外网 IP）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 公网 IP</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 指定网卡（第 0 个网卡）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自定义 URL 获取</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;url:http://ip.sb&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 正则匹配（注意转义）- 不支持分割</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;regex:192</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.168</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 执行命令 - 不支持分割</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cmd:curl -s http://ipv4.icanhazip.com&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Shell 命令 - 不支持分割</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;shell:ip route get 8.8.8.8 | awk &#39;{print </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7}&#39;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 逗号分隔多种方式（仅限无特殊前缀时）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public,default&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 包含逗号的正则表达式（整体作为单一配置）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;regex:192</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.168</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*,10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\\\</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">..*&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多种方式组合（JSON 数组）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;public&quot;, &quot;regex:172\\\\..*&quot;]&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用 IPv4 获取</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div></li></ul><h2 id="网络配置" tabindex="-1">网络配置 <a class="header-anchor" href="#网络配置" aria-label="Permalink to “网络配置”">​</a></h2><h3 id="代理设置" tabindex="-1">代理设置 <a class="header-anchor" href="#代理设置" aria-label="Permalink to “代理设置”">​</a></h3><h4 id="ddns-proxy" tabindex="-1">DDNS_PROXY <a class="header-anchor" href="#ddns-proxy" aria-label="Permalink to “DDNS_PROXY”">​</a></h4><ul><li><p><strong>类型</strong>: 数组（支持 JSON 格式或分号分隔）</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: 无</p></li><li><p><strong>说明</strong>: HTTP 代理设置，支持多代理轮换</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 单个代理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://127.0.0.1:1080&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多个代理（JSON 数组格式）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;http://proxy1:8080&quot;, &quot;http://proxy2:8080&quot;, &quot;DIRECT&quot;]&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 分号分隔格式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://proxy1:8080;http://proxy2:8080;DIRECT&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># DIRECT 表示直连</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DIRECT&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul><h2 id="系统配置" tabindex="-1">系统配置 <a class="header-anchor" href="#系统配置" aria-label="Permalink to “系统配置”">​</a></h2><h3 id="缓存设置" tabindex="-1">缓存设置 <a class="header-anchor" href="#缓存设置" aria-label="Permalink to “缓存设置”">​</a></h3><h4 id="ddns-cache" tabindex="-1">DDNS_CACHE <a class="header-anchor" href="#ddns-cache" aria-label="Permalink to “DDNS_CACHE”">​</a></h4><ul><li><p><strong>类型</strong>: 布尔值或字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>true</code></p></li><li><p><strong>说明</strong>: 启用缓存以减少 API 请求</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启用缓存（默认路径）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 禁用缓存</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 自定义缓存文件路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/ddns.cache&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h3 id="ssl证书验证" tabindex="-1">SSL证书验证 <a class="header-anchor" href="#ssl证书验证" aria-label="Permalink to “SSL证书验证”">​</a></h3><h4 id="ddns-ssl" tabindex="-1">DDNS_SSL <a class="header-anchor" href="#ddns-ssl" aria-label="Permalink to “DDNS_SSL”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串或布尔值</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>&quot;auto&quot;</code></p></li><li><p><strong>说明</strong>: SSL证书验证方式，控制HTTPS连接的证书验证行为</p></li><li><p><strong>可选值</strong>:</p><ul><li><code>&quot;true&quot;</code>: 强制验证SSL证书（最安全）</li><li><code>&quot;false&quot;</code>: 禁用SSL证书验证（最不安全）</li><li><code>&quot;auto&quot;</code>: 优先验证，SSL证书错误时自动降级（不安全）</li><li>文件路径: 使用指定路径的自定义CA证书（最安全）</li></ul></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_SSL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;true&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 强制验证SSL证书</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_SSL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 禁用SSL验证（不推荐）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_SSL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;auto&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 自动降级模式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_SSL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/etc/ssl/certs/ca-certificates.crt&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 自定义CA证书</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h3 id="docker-定时任务配置" tabindex="-1">Docker 定时任务配置 <a class="header-anchor" href="#docker-定时任务配置" aria-label="Permalink to “Docker 定时任务配置”">​</a></h3><h4 id="ddns-cron" tabindex="-1">DDNS_CRON <a class="header-anchor" href="#ddns-cron" aria-label="Permalink to “DDNS_CRON”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>*/5 * * * *</code> （每 5 分钟）</p></li><li><p><strong>说明</strong>: Docker 容器中定时任务的执行周期，仅在 Docker 环境中有效。使用标准的 cron 表达式格式</p></li><li><p><strong>格式</strong>: <code>分钟 小时 日 月 星期</code></p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每 10 分钟执行一次</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CRON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*/10 * * * *&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每小时执行一次</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CRON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 * * * *&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每天凌晨 2 点执行一次</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CRON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 2 * * *&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每 15 分钟执行一次</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CRON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;*/15 * * * *&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 每 2 小时执行一次</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CRON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0 */2 * * *&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li></ul><p><strong>Cron 表达式说明</strong>:</p><table tabindex="0"><thead><tr><th>字段</th><th>允许值</th><th>允许的特殊字符</th></tr></thead><tbody><tr><td>分钟</td><td>0-59</td><td>* , - /</td></tr><tr><td>小时</td><td>0-23</td><td>* , - /</td></tr><tr><td>日</td><td>1-31</td><td>* , - /</td></tr><tr><td>月</td><td>1-12</td><td>* , - /</td></tr><tr><td>星期</td><td>0-7</td><td>* , - /</td></tr></tbody></table><p><strong>常用表达式</strong>:</p><ul><li><code>*/5 * * * *</code> - 每 5 分钟（默认）</li><li><code>*/10 * * * *</code> - 每 10 分钟</li><li><code>*/15 * * * *</code> - 每 15 分钟</li><li><code>0 * * * *</code> - 每小时</li><li><code>0 */2 * * *</code> - 每 2 小时</li><li><code>0 0 * * *</code> - 每天午夜</li><li><code>0 2 * * *</code> - 每天凌晨 2 点</li><li><code>0 0 * * 0</code> - 每周日午夜</li></ul><p><strong>注意</strong>: 此环境变量仅在 Docker 容器中生效，不影响通过其他方式运行的 DDNS 程序。</p><h3 id="日志配置" tabindex="-1">日志配置 <a class="header-anchor" href="#日志配置" aria-label="Permalink to “日志配置”">​</a></h3><h4 id="ddns-log-level" tabindex="-1">DDNS_LOG_LEVEL <a class="header-anchor" href="#ddns-log-level" aria-label="Permalink to “DDNS_LOG_LEVEL”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>INFO</code></p></li><li><p><strong>可选值</strong>: <code>CRITICAL</code>, <code>FATAL</code>, <code>ERROR</code>, <code>WARN</code>, <code>WARNING</code>, <code>INFO</code>, <code>DEBUG</code>, <code>NOTSET</code></p></li><li><p><strong>说明</strong>: 日志级别</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_LEVEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEBUG&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 调试模式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_LEVEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;INFO&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 信息模式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_LEVEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ERROR&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 仅错误</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h4 id="ddns-log-file" tabindex="-1">DDNS_LOG_FILE <a class="header-anchor" href="#ddns-log-file" aria-label="Permalink to “DDNS_LOG_FILE”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: 无（输出到控制台）</p></li><li><p><strong>说明</strong>: 日志文件路径</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/log/ddns.log&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./ddns.log&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="ddns-log-format" tabindex="-1">DDNS_LOG_FORMAT <a class="header-anchor" href="#ddns-log-format" aria-label="Permalink to “DDNS_LOG_FORMAT”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>%(asctime)s %(levelname)s [%(module)s]: %(message)s</code></p></li><li><p><strong>说明</strong>: 日志格式字符串，参考Python logging模块的格式化语法</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 默认格式（含模块名）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FORMAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%(asctime)s %(levelname)s [%(module)s]: %(message)s&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 包含文件名和行号（debug模式下默认格式）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FORMAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%(asctime)s %(levelname)s [%(filename)s:%(lineno)d]: %(message)s&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 简单格式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FORMAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%(levelname)s: %(message)s&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h4 id="ddns-log-datefmt" tabindex="-1">DDNS_LOG_DATEFMT <a class="header-anchor" href="#ddns-log-datefmt" aria-label="Permalink to “DDNS_LOG_DATEFMT”">​</a></h4><ul><li><p><strong>类型</strong>: 字符串</p></li><li><p><strong>必需</strong>: 否</p></li><li><p><strong>默认值</strong>: <code>%Y-%m-%dT%H:%M:%S</code></p></li><li><p><strong>说明</strong>: 日期时间格式字符串，参考Python time.strftime()的格式化语法</p></li><li><p><strong>示例</strong>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ISO 格式（默认）</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_DATEFMT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%Y-%m-%dT%H:%M:%S&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 简短格式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_DATEFMT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%m-%d %H:%M:%S&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 标准格式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_DATEFMT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%Y-%m-%d %H:%M:%S&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h2 id="使用示例" tabindex="-1">使用示例 <a class="header-anchor" href="#使用示例" aria-label="Permalink to “使用示例”">​</a></h2><h3 id="docker-环境变量示例" tabindex="-1">Docker 环境变量示例 <a class="header-anchor" href="#docker-环境变量示例" aria-label="Permalink to “Docker 环境变量示例”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_DNS=dnspod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_ID=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">12345</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_TOKEN=your_token_here</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_IPV4=example.com</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_IPV6=&#39;[&quot;ipv6.example.com&quot;,&quot;example.com&quot;]&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_INDEX4=[&quot;public&quot;,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0]</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_INDEX6=public</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_TTL=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">600</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_LOG_LEVEL=INFO</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_LOG_FORMAT=&quot;%(asctime)s %(levelname)s [%(module)s]: %(message)s&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> DDNS_LOG_DATEFMT=&quot;%Y-%m-%dT%H:%M:%S&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  newfuture/ddns</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="复杂配置示例" tabindex="-1">复杂配置示例 <a class="header-anchor" href="#复杂配置示例" aria-label="Permalink to “复杂配置示例”">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 阿里云 DNS 高级配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_DNS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;alidns&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_access_key_id&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_TOKEN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your_access_key_secret&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多域名配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_IPV4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;ddns.example.com&quot;, &quot;home.example.com&quot;, &quot;server.example.com&quot;]&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_IPV6</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;ipv6.example.com&quot;]&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 多种 IP 获取方式</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;public&quot;, &quot;regex:192\\\\.168\\\\.1\\\\..*&quot;, &quot;cmd:curl -s ipv4.icanhazip.com&quot;]&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_INDEX6</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 代理和缓存配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_PROXY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[&quot;http://proxy.example.com:8080&quot;, &quot;DIRECT&quot;]&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_CACHE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/home/user/.ddns_cache&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 日志配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_LEVEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEBUG&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FILE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/var/log/ddns.log&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_FORMAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%(asctime)s %(levelname)s [%(filename)s:%(lineno)d]: %(message)s&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_LOG_DATEFMT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%Y-%m-%d %H:%M:%S&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TTL 设置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DDNS_TTL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;300&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 运行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ddns</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to “注意事项”">​</a></h2><ol><li><p><strong>数组参数格式</strong>: <code>index4</code>, <code>index6</code>, <code>ipv4</code>, <code>ipv6</code>, <code>proxy</code> 等数组参数支持两种格式：</p><ul><li>JSON 数组格式：<code>&#39;[&quot;item1&quot;, &quot;item2&quot;]&#39;</code>（推荐）</li><li>逗号分隔格式：<code>&quot;item1,item2&quot;</code></li></ul></li><li><p><strong>特殊前缀规则</strong>: 对于 <code>index4</code> 和 <code>index6</code> 参数：</p><ul><li>当值包含 <code>regex:</code>、<code>cmd:</code> 或 <code>shell:</code> 前缀时，整个字符串将作为单一配置项，不会按分隔符分割</li><li>例如：<code>&quot;regex:192\\\\.168\\\\..*,10\\\\..*&quot;</code> 会被视为一个完整的正则表达式，而不是两个配置项</li><li>这是因为这些前缀的值内部可能包含逗号或分号，分割会破坏配置的完整性</li></ul></li><li><p><strong>配置优先级和字段覆盖关系</strong>:</p><p>DDNS工具中的配置优先级顺序为：<strong>命令行参数 &gt; JSON配置文件 &gt; 环境变量</strong></p><ul><li><strong>命令行参数</strong>: 优先级最高，会覆盖JSON配置文件和环境变量中的相同设置</li><li><strong>JSON配置文件</strong>: 优先级中等，会覆盖环境变量中的设置，但会被命令行参数覆盖</li><li><strong>环境变量</strong>: 优先级最低，当命令行参数和JSON配置文件中都没有相应设置时使用</li></ul><p>举例说明：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span># 环境变量设置</span></span>
<span class="line"><span>export DDNS_TTL=&quot;600&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># JSON配置文件内容</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>  &quot;ttl&quot;: 300</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 命令行参数</span></span>
<span class="line"><span>ddns --ttl 900</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在上述例子中：</p><ul><li>最终生效的是命令行参数值：<code>ttl=900</code></li><li>如果不提供命令行参数，则使用JSON配置文件值：<code>ttl=300</code></li><li>如果JSON配置和命令行参数都不提供，则使用环境变量值：<code>ttl=600</code></li></ul><p>另外，JSON配置文件中明确设置为<code>null</code>的值会覆盖环境变量设置，相当于未设置该值。</p></li><li><p><strong>大小写兼容</strong>: 环境变量名支持大写、小写或混合大小写</p></li><li><p><strong>安全提醒</strong>:</p><ul><li>请妥善保管 <code>DDNS_TOKEN</code> 等敏感信息</li><li>在脚本中使用时避免明文存储</li><li>考虑使用 <code>.env</code> 文件或密钥管理系统</li></ul></li><li><p><strong>调试建议</strong>: 出现问题时，可设置 <code>DDNS_LOG_LEVEL=DEBUG</code> 获取详细日志信息</p></li></ol>`,60)])])}const g=i(e,[["render",t]]);export{c as __pageData,g as default};
